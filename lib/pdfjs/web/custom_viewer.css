/* ========== _variables.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - CSS VARIABLES & THEMES
 * ============================================================================
 */

:root {
    /* Toolbar Colors */
    --toolbar-bg-color: #2d2d2d;
    --toolbar-border-color: #1e1e1e;
    --toolbar-text-color: #e0e0e0;
    --toolbar-icon-color: #e0e0e0;
    --toolbar-hover-bg-color: #3e3e3e;
    --input-bg-color: #3c3c3c;
    --input-border-color: #3c3c3c;
    --input-text-color: #f0f0f0;
    --separator-color: #555;

    /* Theme Colors - Dark (default) */
    --theme-bg-primary: #1e1e1e;
    --theme-bg-secondary: #2d2d2d;
    --theme-bg-tertiary: #333333;
    --theme-bg-hover: #3e3e3e;
    --theme-text-primary: #e0e0e0;
    --theme-text-secondary: #aaaaaa;
    --theme-text-muted: #888888;
    --theme-border-color: #444444;
    --theme-accent: #667eea;
    --theme-accent-light: rgba(102, 126, 234, 0.2);
    --theme-accent-hover: #764ba2;
    --theme-success: #4caf50;
    --theme-warning: #ff9800;
    --theme-error: #ef5350;
    --theme-scrollbar-track: #1e1e1e;
    --theme-scrollbar-thumb: #555555;
    --theme-scrollbar-thumb-hover: #777777;

    /* Spacing */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;

    /* Border Radius */
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-full: 9999px;

    /* Shadows */
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.2);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.4);

    /* Transitions */
    --transition-fast: 0.15s ease;
    --transition-normal: 0.25s ease;

    /* Z-Index Scale */
    --z-sidebar: 100;
    --z-dropdown: 1000;
    --z-modal: 9000;
    --z-toolbar: 9999;
    --z-tooltip: 10001;
}

/* ========== Light Theme ========== */
[data-theme="light"] {
    --toolbar-bg-color: #f5f5f5;
    --toolbar-border-color: #e0e0e0;
    --toolbar-text-color: #333333;
    --toolbar-icon-color: #333333;
    --toolbar-hover-bg-color: #e8e8e8;
    --input-bg-color: #ffffff;
    --input-border-color: #cccccc;
    --input-text-color: #333333;
    --separator-color: #cccccc;

    --theme-bg-primary: #f8f9fa;
    --theme-bg-secondary: #ffffff;
    --theme-bg-tertiary: #f0f0f0;
    --theme-bg-hover: #e8e8e8;
    --theme-text-primary: #333333;
    --theme-text-secondary: #666666;
    --theme-text-muted: #888888;
    --theme-border-color: #e0e0e0;
    --theme-accent-light: rgba(102, 126, 234, 0.15);
    --theme-scrollbar-track: #f0f0f0;
    --theme-scrollbar-thumb: #cccccc;
    --theme-scrollbar-thumb-hover: #aaaaaa;
}

/* ========== Sepia Theme ========== */
[data-theme="sepia"] {
    --toolbar-bg-color: #e8dcc8;
    --toolbar-border-color: #d4c8b4;
    --toolbar-text-color: #5b4636;
    --toolbar-icon-color: #5b4636;
    --toolbar-hover-bg-color: #ddd0bc;
    --input-bg-color: #f4ecd8;
    --input-border-color: #d4c8b4;
    --input-text-color: #5b4636;

    --theme-bg-primary: #f4ecd8;
    --theme-bg-secondary: #e8dcc8;
    --theme-bg-tertiary: #ddd0bc;
    --theme-text-primary: #5b4636;
    --theme-text-secondary: #7a6450;
    --theme-scrollbar-track: #e8dcc8;
    --theme-scrollbar-thumb: #c4b8a4;
}

/* ========== Scrollbars ========== */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: var(--theme-scrollbar-track);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb {
    background: var(--theme-scrollbar-thumb);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--theme-scrollbar-thumb-hover);
}

* {
    scrollbar-width: auto;
    scrollbar-color: var(--theme-scrollbar-thumb) var(--theme-scrollbar-track);
}


/* ========== _base.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - BASE STYLES
 * ============================================================================
 * Foundation styles and resets for the PDF viewer
 */

/* ========== Box Sizing Reset ========== */
*,
*::before,
*::after {
    box-sizing: border-box;
}

/* ========== Scrollbar Styling ========== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--theme-bg-secondary);
}

::-webkit-scrollbar-thumb {
    background: var(--theme-border-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--theme-text-secondary);
}

/* ========== Selection ========== */
::selection {
    background: rgba(99, 102, 241, 0.3);
    color: inherit;
}

/* Prevent textLayer container itself from showing selection — only spans should highlight */
.page .textLayer::selection,
.page .textLayer::-moz-selection {
    background: transparent;
}

/* ========== Focus States ========== */
:focus {
    outline: none;
}

:focus-visible {
    outline: 2px solid var(--theme-accent-color);
    outline-offset: 2px;
}

/* ========== Common Button Reset ========== */
button {
    font-family: inherit;
    cursor: pointer;
    border: none;
    background: none;
    color: inherit;
}

/* ========== Common Transitions ========== */
.smooth-transition {
    transition: all 0.2s ease;
}


/* ========== _themes.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - THEME STYLES
 * ============================================================================
 */

/* ========== Theme Variables ========== */
body.theme-light {
    --bg-color: #ffffff;
    --text-color: #1a1a1a;
    --toolbar-bg-color: #f5f5f5;
    --toolbar-border-color: #ddd;
    --toolbar-text-color: #333;
    --toolbar-icon-color: #333;
    --toolbar-hover-bg-color: #e0e0e0;
    --input-bg-color: #fff;
    --input-border-color: #ccc;
    --input-text-color: #333;
    background-color: #f0f0f0 !important;
}

body.theme-dark {
    --bg-color: #1e1e1e;
    --text-color: #e0e0e0;
    --toolbar-bg-color: #2d2d2d;
    --toolbar-border-color: #1e1e1e;
    --toolbar-text-color: #e0e0e0;
    --toolbar-icon-color: #e0e0e0;
    --toolbar-hover-bg-color: #3e3e3e;
    --input-bg-color: #3c3c3c;
    --input-border-color: #3c3c3c;
    --input-text-color: #f0f0f0;
    background-color: #1e1e1e !important;
}

body.theme-sepia {
    --bg-color: #f4ecd8;
    --text-color: #5b4636;
    --toolbar-bg-color: #e8dcc8;
    --toolbar-border-color: #d4c4a8;
    --toolbar-text-color: #5b4636;
    --toolbar-icon-color: #5b4636;
    --toolbar-hover-bg-color: #ddd0b8;
    --input-bg-color: #f4ecd8;
    --input-border-color: #d4c4a8;
    --input-text-color: #5b4636;
    background-color: #f4ecd8 !important;
}

/* ========== Theme - Viewer Container ========== */
body.theme-light #viewerContainer,
body.theme-sepia #viewerContainer {
    background-color: var(--bg-color);
}

body.theme-light .page,
body.theme-sepia .page {
    background-color: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* ========== Theme - Page Color Filters ========== */
body.theme-dark .page canvas {
    filter: invert(0.9) hue-rotate(180deg);
}

body.theme-dark .page .canvasWrapper {
    background-color: #2a2a2a !important;
}

body.theme-dark .page {
    background-color: #2a2a2a !important;
}

body.theme-sepia .page canvas {
    filter: sepia(0.3) brightness(0.95);
}

body.theme-sepia .page .canvasWrapper {
    background-color: #f4ecd8 !important;
}

body.theme-light .page .canvasWrapper {
    background-color: white !important;
}

/* ========== Theme Options UI ========== */
.theme-options {
    display: flex;
    gap: 12px;
    margin-top: 8px;
}

.theme-btn {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 12px 8px;
    background: var(--theme-bg-secondary);
    border: 2px solid var(--theme-border-color);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.theme-btn:hover {
    border-color: var(--theme-accent);
    background: var(--theme-bg-hover);
}

.theme-btn.active {
    border-color: var(--theme-accent);
    background: var(--theme-accent-light);
}

.theme-icon {
    font-size: 24px;
}

.theme-label {
    font-size: 12px;
    font-weight: 500;
    color: var(--theme-text-primary);
}


/* ========== _toolbar.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - BASE STYLES
 * ============================================================================
 */

body {
    background-color: var(--theme-bg-primary);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 0;
}

.hidden {
    display: none !important;
}

/* ========== Container Layout ========== */
#outerContainer {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}

#mainContainer {
    position: absolute;
    top: 40px;
    left: 0;
    right: 0;
    bottom: 0;
}

#viewerContainer {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: auto;
    background-color: var(--theme-bg-primary);
}

/* When sidebar is open, shift viewer to the right */
#mainContainer.sidebarOpen #viewerContainer {
    left: 280px;
}

/* ========== Toolbar Container ========== */
#toolbarContainer {
    width: 100%;
    height: 40px;
    background-color: var(--toolbar-bg-color);
    border-bottom: 1px solid var(--toolbar-border-color);
    box-shadow: var(--shadow-sm);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: var(--z-toolbar);
}

#toolbarViewer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 100%;
    padding: 0 10px;
    box-sizing: border-box;
}

#toolbarViewerLeft,
#toolbarViewerRight {
    display: flex;
    align-items: center;
    gap: 5px;
}

/* ========== Toolbar Buttons ========== */
.toolbarButton {
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    color: var(--toolbar-icon-color);
    cursor: pointer;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color var(--transition-fast);
    min-width: 32px;
    min-height: 32px;
}

.toolbarButton:hover {
    background-color: var(--toolbar-hover-bg-color);
}

.toolbarButton.active {
    background-color: rgba(66, 133, 244, 0.3) !important;
    border: 1px solid #4285f4 !important;
}

.toolbarButton svg {
    width: 18px;
    height: 18px;
    stroke: currentColor;
}

/* ========== Toolbar Inputs ========== */
#pageNumber {
    background-color: var(--input-bg-color);
    border: 1px solid var(--input-border-color);
    color: var(--input-text-color);
    border-radius: var(--radius-sm);
    padding: 4px 8px;
    width: 72px;
    min-width: 72px;
    flex: 0 0 auto;
    text-align: center;
    font-size: 13px;
    margin: 0 5px;
}

#pageNumber:focus {
    outline: 1px solid #007acc;
    border-color: #007acc;
}

.toolbarLabel {
    color: var(--toolbar-text-color);
    font-size: 13px;
    margin-right: 5px;
}

#scaleSelect {
    background-color: var(--input-bg-color);
    border: 1px solid var(--input-border-color);
    color: var(--input-text-color);
    border-radius: var(--radius-sm);
    padding: 4px 8px;
    font-size: 13px;
    cursor: pointer;
    margin-left: 5px;
}

/* ========== Toolbar Separator ========== */
.verticalToolbarSeparator {
    display: block;
    width: 1px;
    height: 20px;
    background-color: var(--separator-color);
    margin: 0 8px;
}

/* ========== Toolbar Dropdown ========== */
.toolbar-dropdown-wrapper {
    position: relative;
    display: inline-flex;
}

.color-picker-dropdown {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: var(--toolbar-bg-color);
    border: 1px solid var(--toolbar-border-color);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
    margin-top: 8px;
    z-index: var(--z-tooltip);
}

.color-picker-dropdown.hidden {
    display: none;
}

.color-btn {
    width: 24px;
    height: 24px;
    border: 2px solid transparent;
    border-radius: 50%;
    cursor: pointer;
    transition: transform var(--transition-fast), border-color var(--transition-fast);
}

.color-btn:hover {
    transform: scale(1.2);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.color-btn.active {
    border-color: #fff;
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);
}


/* ========== _sidebar.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - SIDEBAR STYLES
 * ============================================================================
 */

/* ========== Sidebar Container ========== */
#sidebarContainer {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 100%;
    background-color: #252526;
    border-right: 1px solid #1e1e1e;
    overflow-x: hidden;
    overflow-y: auto;
    transition: width 0.25s ease;
    z-index: 100;
}

#mainContainer.sidebarOpen #sidebarContainer {
    width: 280px;
    visibility: visible;
}

#mainContainer.sidebarOpen #viewerContainer {
    left: 280px;
}

#sidebarContent {
    width: 280px;
    padding: 12px;
    overflow-y: auto;
    height: 100%;
    box-sizing: border-box;
}

/* ========== Sidebar Thumbnails ========== */
#thumbnailView {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 5px;
}

.thumbnail {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    border-radius: 4px;
    padding: 8px;
    transition: background-color 0.2s;
}

.thumbnail:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.thumbnail.selected {
    background-color: rgba(66, 133, 244, 0.3);
}

.thumbnailImage {
    border: 1px solid #444;
    border-radius: 2px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.thumbnailNumber {
    margin-top: 6px;
    font-size: 11px;
    color: #888;
}

/* ========== Sidebar Outline - MODERN DESIGN ========== */
#outlineView {
    padding: 12px 8px;
    overflow-y: auto;
}

/* Header */
#outlineView::before {
    content: 'Table of Contents';
    display: block;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: rgba(255, 255, 255, 0.4);
    padding: 8px 8px 16px;
}

/* Remove ALL list bullets */
#outlineView ul,
#outlineView li,
#outlineView .outlineList,
#outlineView .outlineList ul,
#outlineView .outlineList li {
    list-style: none !important;
    list-style-type: none !important;
    margin: 0 !important;
    padding: 0 !important;
}

#outlineView .outlineList ul {
    margin-left: 16px !important;
    padding-left: 12px !important;
    border-left: 1px solid rgba(255, 255, 255, 0.08);
    overflow: hidden;
    max-height: 10000px;
    opacity: 1;
    transition: max-height 0.35s ease, opacity 0.25s ease;
}

/* Collapsed animation */
#outlineView li.collapsed>ul {
    max-height: 0 !important;
    opacity: 0 !important;
}

/* Item container */
#outlineView .outline-item-container {
    display: flex;
    align-items: center;
    padding: 10px 12px;
    margin: 2px 0;
    cursor: pointer;
    border-radius: 8px;
    gap: 10px;
    background: transparent;
    transition: all 0.2s ease;
}

#outlineView .outline-item-container:hover {
    background: rgba(255, 255, 255, 0.06);
}

#outlineView .outline-item-container.active {
    background: rgba(139, 92, 246, 0.15);
    border-left: 3px solid #a78bfa;
    padding-left: 9px;
}

/* LINKS - Override ALL browser defaults */
#outlineView a,
#outlineView a:link,
#outlineView a:visited,
#outlineView a:active,
#outlineView .outline-item-container a {
    color: rgba(255, 255, 255, 0.8) !important;
    text-decoration: none !important;
    font-size: 13px;
    font-weight: 400;
    line-height: 1.4;
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    transition: color 0.15s ease;
}

#outlineView .outline-item-container:hover a {
    color: #fff !important;
}

/* Top level items bolder */
#outlineView>.outlineList>li>.outline-item-container a {
    font-weight: 500;
    color: rgba(255, 255, 255, 0.9) !important;
}

/* Toggle button */
#outlineView .outline-toggle {
    width: 20px;
    height: 20px;
    min-width: 20px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 9px;
    color: #a78bfa;
    cursor: pointer;
    border-radius: 4px;
    background: rgba(139, 92, 246, 0.12);
    transition: all 0.2s ease;
}

#outlineView .outline-toggle:hover {
    background: rgba(139, 92, 246, 0.25);
    color: #c4b5fd;
}

/* Rotate when expanded */
#outlineView li:not(.collapsed)>.outline-item-container>.outline-toggle {
    transform: rotate(90deg);
}

#outlineView .outline-toggle.spacer {
    visibility: hidden;
    background: transparent;
}

/* Legacy .outlineItem class */
.outlineItem {
    padding: 10px 12px;
    cursor: pointer;
    border-radius: 8px;
    transition: all 0.2s;
    color: rgba(255, 255, 255, 0.8);
    font-size: 13px;
    display: block;
    text-decoration: none !important;
}

.outlineItem:hover {
    background: rgba(255, 255, 255, 0.06);
    color: #fff;
}

.outlineItems {
    padding-left: 16px;
    margin-left: 8px;
    border-left: 1px solid rgba(255, 255, 255, 0.08);
}

/* ========== Sidebar Tabs ========== */
.sidebar-tabs {
    display: flex;
    border-bottom: 1px solid #444;
    margin-bottom: 10px;
}

.sidebar-tab {
    flex: 1;
    padding: 10px;
    background: transparent;
    border: none;
    color: #888;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
    border-bottom: 2px solid transparent;
}

.sidebar-tab:hover {
    color: #ccc;
}

.sidebar-tab.active {
    color: #4285f4;
    border-bottom-color: #4285f4;
}

/* ========== Sidebar Views ========== */
.sidebar-view {
    display: none;
}

.sidebar-view.active {
    display: block;
}


/* ========== _highlight.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - HIGHLIGHT SYSTEM STYLES
 * ============================================================================
 */

/* ========== Page Layering ========== */
.page {
    position: relative !important;
    background-color: white;
}

.page canvas {
    position: relative;
    z-index: 0 !important;
}

.page .canvasWrapper {
    z-index: 0 !important;
}

/* Highlight container BELOW text layer so text selection works */
.page .highlight-container {
    z-index: 1 !important;
    pointer-events: none;
}

/* Text layer ABOVE highlights and selectable */
.page .textLayer {
    z-index: 2 !important;
    opacity: 1 !important;
    user-select: none;
    -webkit-user-select: none;
}

/* Highlights - pointer events OFF by default to allow text selection */
.page .highlight-container .pdf-highlight {
    pointer-events: none;
}

/* Text layer spans should be transparent but selectable */
.page .textLayer span {
    color: transparent !important;
    position: absolute;
    white-space: pre;
    pointer-events: all;
    cursor: text;
    user-select: text;
    -webkit-user-select: text;
    line-height: 1.0;
    overflow: hidden;
}

/* Single unified selection color for text spans */
.page .textLayer span::selection {
    background: rgba(99, 102, 241, 0.3);
}

.page .textLayer span::-moz-selection {
    background: rgba(99, 102, 241, 0.3);
}

/* ========== PDF Highlights ========== */
.pdf-highlight {
    pointer-events: none;
    /* Allow text selection through highlights */
}

.pdf-highlight:hover {
    z-index: 10;
    pointer-events: auto;
    /* Enable delete button on hover */
}

/* ========== Highlight Mode Toggle ========== */
.toolbarButton.active {
    background-color: rgba(66, 133, 244, 0.3) !important;
    border: 1px solid #4285f4 !important;
}

.toolbarButton.active:hover {
    background-color: rgba(66, 133, 244, 0.4) !important;
}

/* ========== Color Picker Dropdown ========== */
#highlightColorPicker.color-picker-dropdown {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: var(--toolbar-bg-color);
    border: 1px solid var(--toolbar-border-color);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    margin-top: 8px;
    z-index: 10001;
}

#highlightColorPicker.color-picker-dropdown.hidden {
    display: none;
}


/* ========== _drawing.css ========== */
/* Drawing Manager Styles */

.drawing-toolbar {
    position: fixed;
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--toolbar-bg, #2a2a2e);
    border: 1px solid var(--toolbar-border, #444);
    border-radius: 8px;
    padding: 8px 12px;
    z-index: 10000;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    gap: 16px;
}

.drawing-toolbar.hidden {
    display: none !important;
}

.drawing-toolbar-content {
    display: flex;
    align-items: center;
    gap: 16px;
}

.drawing-toolbar .tool-section {
    display: flex;
    align-items: center;
    gap: 8px;
}

.drawing-toolbar .section-label {
    font-size: 11px;
    color: #999;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.drawing-toolbar .tool-buttons {
    display: flex;
    gap: 4px;
}

.drawing-toolbar .tool-btn,
.drawing-toolbar .action-btn {
    width: 32px;
    height: 32px;
    border: 1px solid transparent;
    border-radius: 6px;
    background: transparent;
    color: #ccc;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.drawing-toolbar .tool-btn:hover,
.drawing-toolbar .action-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
}

.drawing-toolbar .tool-btn.active {
    background: var(--primary, #667eea);
    color: white;
    border-color: var(--primary, #667eea);
}

.drawing-toolbar .color-picker-row {
    display: flex;
    align-items: center;
    gap: 8px;
}

.drawing-toolbar input[type="color"] {
    width: 28px;
    height: 28px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    padding: 0;
}

.drawing-toolbar .color-presets {
    display: flex;
    gap: 4px;
}

.drawing-toolbar .color-preset,
.drawing-toolbar .highlight-preset {
    width: 22px;
    height: 22px;
    border: 2px solid transparent;
    border-radius: 4px;
    cursor: pointer;
    transition: transform 0.2s, border-color 0.2s;
}

.drawing-toolbar .color-preset:hover,
.drawing-toolbar .highlight-preset:hover {
    transform: scale(1.1);
}

.drawing-toolbar .highlight-preset.active {
    border-color: white;
}

.drawing-toolbar input[type="range"] {
    width: 60px;
    height: 4px;
    -webkit-appearance: none;
    background: #444;
    border-radius: 2px;
    outline: none;
}

.drawing-toolbar input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    background: var(--primary, #667eea);
    border-radius: 50%;
    cursor: pointer;
}

.drawing-toolbar #sizeValue {
    font-size: 11px;
    color: #999;
    min-width: 30px;
}

.drawing-toolbar .actions-section {
    border-left: 1px solid #444;
    padding-left: 12px;
}

.drawing-toolbar .close-btn {
    color: #ff6b6b;
}

.drawing-toolbar .close-btn:hover {
    background: rgba(255, 107, 107, 0.2);
    color: #ff6b6b;
}

.drawing-toolbar .tool-section.hidden {
    display: none;
}

/* Drawing canvas overlay - CRITICAL for drawing to work */
/* Must be a direct child of .page to be above textLayer (z-index:2) and annotationLayer (z-index:4) */
.drawing-canvas-overlay {
    position: absolute !important;
    pointer-events: none;
    z-index: 5 !important;
}

.drawing-canvas-overlay.active {
    pointer-events: auto !important;
    cursor: crosshair !important;
    z-index: 100 !important;
}

.drawing-canvas-overlay.eraser {
    cursor: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="white" stroke="black" stroke-width="1"/></svg>') 10 10, auto;
}

/* Toolbar button active state */
#drawingModeToggle.active {
    background: var(--primary, #667eea) !important;
    color: white !important;
}


/* ========== _notes.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - PDF NOTES PANEL STYLES
 * ============================================================================
 */

/* ========== PDF Notes Panel ========== */
.pdf-notes-panel {
    position: fixed;
    top: 50px;
    right: 10px;
    width: 360px;
    max-height: calc(100vh - 70px);
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    z-index: 10000;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    animation: slideInRight 0.3s ease;
}

.pdf-notes-panel.hidden {
    display: none;
}

.notes-panel-header {
    padding: 14px 16px;
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    color: white;
}

.notes-panel-header h3 {
    margin: 0 0 4px 0;
    font-size: 16px;
    font-weight: 600;
}

.notes-pdf-title {
    font-size: 12px;
    opacity: 0.9;
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.notes-panel-close {
    position: absolute;
    top: 10px;
    right: 12px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    font-size: 18px;
    cursor: pointer;
}

.notes-panel-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* ========== Notes Add Section ========== */
.notes-add-section {
    padding: 12px;
    border-bottom: 1px solid #eee;
}

.notes-add-section textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 13px;
    resize: none;
    box-sizing: border-box;
}

.notes-add-section textarea:focus {
    outline: none;
    border-color: #11998e;
}

.notes-add-actions {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 8px;
}

.note-page-input {
    display: flex;
    align-items: center;
    gap: 6px;
}

.note-page-input label {
    font-size: 12px;
    color: #666;
}

.note-page-input input {
    width: 60px;
    padding: 6px 8px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 12px;
}

.add-note-btn {
    flex: 1;
    padding: 8px 16px;
    background: #11998e;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 13px;
    cursor: pointer;
    transition: background 0.2s;
}

.add-note-btn:hover {
    background: #0d8073;
}

/* ========== Notes List ========== */
.notes-list-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    background: #f8f9fa;
    font-size: 12px;
    color: #666;
}

.notes-actions {
    display: flex;
    gap: 6px;
}

.small-action-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 14px;
    padding: 4px;
    border-radius: 4px;
}

.small-action-btn:hover {
    background: #e9ecef;
}

.notes-list {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
}

.notes-empty {
    text-align: center;
    color: #888;
    padding: 30px 20px;
    font-size: 13px;
}

/* ========== Note Item ========== */
.note-item {
    background: #fff9c4;
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 10px;
    position: relative;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    transition: transform 0.2s, box-shadow 0.2s;
}

.note-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

.note-selected-text {
    background: rgba(0, 0, 0, 0.05);
    border-radius: 6px;
    padding: 8px;
    margin-bottom: 10px;
    border-left: 3px solid #1976d2;
}

.note-selected-text small {
    color: #666;
    font-size: 10px;
    display: block;
    margin-bottom: 4px;
}

.note-selected-text blockquote {
    margin: 0;
    font-style: italic;
    color: #333;
    font-size: 12px;
    line-height: 1.4;
}

.note-content {
    font-size: 13px;
    line-height: 1.5;
    color: #333;
    margin-bottom: 8px;
    white-space: pre-wrap;
}

.note-meta {
    display: flex;
    gap: 10px;
    font-size: 11px;
    color: #888;
}

.note-page {
    cursor: pointer;
    color: #11998e;
}

.note-page:hover {
    text-decoration: underline;
}

.note-highlight-badge {
    background: #e3f2fd;
    color: #1976d2;
    padding: 2px 6px;
    border-radius: 10px;
    font-size: 10px;
}

.note-actions {
    position: absolute;
    top: 8px;
    right: 8px;
    display: flex;
    gap: 4px;
    opacity: 0;
    transition: opacity 0.2s;
}

.note-item:hover .note-actions {
    opacity: 1;
}

.note-action-btn {
    background: rgba(255, 255, 255, 0.8);
    border: none;
    width: 24px;
    height: 24px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
}

.note-action-btn:hover {
    background: #fff;
}

/* ========== Note Edit Dialog ========== */
.note-edit-dialog {
    position: fixed;
    top: 40px;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9998;
}

.note-edit-content {
    background: white;
    padding: 20px;
    border-radius: 12px;
    width: 90%;
    max-width: 400px;
}

.note-edit-content h4 {
    margin: 0 0 12px 0;
}

.note-edit-content textarea {
    width: 100%;
    height: 100px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 8px;
    resize: vertical;
    box-sizing: border-box;
}

.note-edit-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 12px;
}

.cancel-btn {
    padding: 8px 16px;
    background: #f1f1f1;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.save-btn {
    padding: 8px 16px;
    background: #11998e;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.notes-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #ff5252;
    color: white;
    font-size: 10px;
    min-width: 16px;
    height: 16px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.notes-badge.hidden {
    display: none;
}

.notes-toast {
    position: fixed;
    bottom: 24px;
    right: 24px;
    left: auto;
    transform: translateX(100%);
    opacity: 0;
    background: #1e1e3f;
    color: #ffffff;
    padding: 16px 24px;
    border-radius: 10px;
    border: 1px solid #2a2a4a;
    border-left: 4px solid #10b981;
    font-size: 14px;
    font-weight: 600;
    z-index: 100020;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    max-width: 420px;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    transition: opacity 0.25s ease, transform 0.25s ease;
}

/* Toolbar button position fix */
#pdfNotesBtn,
#researchLibraryBtn {
    position: relative;
}

/* ========== Dark Theme ========== */
body.theme-dark .pdf-notes-panel {
    background: #2d2d2d;
    color: #e0e0e0;
}

body.theme-dark .notes-add-section {
    border-color: #444;
}

body.theme-dark .notes-add-section textarea,
body.theme-dark .note-page-input input {
    background: #3c3c3c;
    border-color: #555;
    color: #e0e0e0;
}

body.theme-dark .notes-list-header {
    background: #363636;
}

body.theme-dark .note-item {
    background: #4a4522 !important;
}

body.theme-dark .note-selected-text {
    background: rgba(255, 255, 255, 0.1);
    border-left-color: #64b5f6;
}

body.theme-dark .note-selected-text small {
    color: #aaa;
}

body.theme-dark .note-selected-text blockquote {
    color: #ddd;
}

body.theme-dark .note-content {
    color: #e0e0e0;
}

/* ========== Responsive ========== */
@media (max-width: 768px) {
    .pdf-notes-panel {
        width: calc(100% - 20px);
        right: 10px;
        left: 10px;
    }
}


/* ========== _global-notes.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - GLOBAL NOTES MANAGER STYLES
 * ============================================================================
 */

/* ========== Global Notes Panel ========== */
.global-notes-panel {
    position: fixed;
    top: 40px;
    right: -450px;
    width: 420px;
    height: calc(100vh - 40px);
    background: var(--theme-bg-primary);
    border-left: 1px solid var(--theme-border-color);
    z-index: 9998;
    display: flex;
    flex-direction: column;
    transition: right 0.3s ease;
    box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.global-notes-panel.visible {
    right: 0;
}

.global-notes-panel .notes-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.global-notes-panel .notes-header h2 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
}

.global-notes-panel .notes-close-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
}

.global-notes-panel .notes-close-btn:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* ========== Notes Toolbar ========== */
.global-notes-panel .notes-toolbar {
    padding: 12px 16px;
    background: var(--theme-bg-secondary);
    border-bottom: 1px solid var(--theme-border-color);
}

.global-notes-panel .notes-search {
    margin-bottom: 10px;
}

.global-notes-panel .notes-search-input {
    width: 100%;
    padding: 10px 14px;
    border: 1px solid var(--theme-border-color);
    border-radius: 8px;
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-primary);
    font-size: 14px;
    box-sizing: border-box;
}

.global-notes-panel .notes-search-input:focus {
    outline: none;
    border-color: var(--theme-accent);
}

.global-notes-panel .notes-search-input::placeholder {
    color: var(--theme-text-muted);
}

.global-notes-panel .notes-actions {
    display: flex;
    gap: 8px;
}

.global-notes-panel .notes-btn {
    flex: 1;
    padding: 8px 12px;
    border: none;
    border-radius: 6px;
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-primary);
    font-size: 13px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: background 0.2s;
}

.global-notes-panel .notes-btn:hover {
    background: var(--theme-bg-hover);
}

/* ========== Notes Filters ========== */
.global-notes-panel .notes-filters {
    display: flex;
    gap: 6px;
    padding: 10px 16px;
    background: var(--theme-bg-secondary);
    border-bottom: 1px solid var(--theme-border-color);
}

.global-notes-panel .filter-btn {
    padding: 6px 14px;
    border: none;
    border-radius: 16px;
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-secondary);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
}

.global-notes-panel .filter-btn:hover {
    background: var(--theme-bg-hover);
}

.global-notes-panel .filter-btn.active {
    background: var(--theme-accent);
    color: white;
}

/* ========== Notes Breadcrumb ========== */
.global-notes-panel .notes-breadcrumb {
    padding: 10px 16px;
    background: var(--theme-bg-secondary);
    border-bottom: 1px solid var(--theme-border-color);
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--theme-text-muted);
}

.global-notes-panel .breadcrumb-item {
    cursor: pointer;
    transition: color 0.2s;
}

.global-notes-panel .breadcrumb-item:hover {
    color: var(--theme-accent);
}

.global-notes-panel .breadcrumb-item.active {
    color: var(--theme-text-primary);
    font-weight: 500;
}

.global-notes-panel .breadcrumb-separator {
    color: #666;
}

/* ========== Notes Content ========== */
.global-notes-panel .notes-content {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
}

.global-notes-panel .notes-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* ========== Folder Item ========== */
.global-notes-panel .folder-item {
    background: var(--theme-bg-secondary);
    border-radius: 10px;
    padding: 14px;
    cursor: pointer;
    transition: all 0.2s;
    border: 1px solid var(--theme-border-color);
}

.global-notes-panel .folder-item:hover {
    background: var(--theme-bg-tertiary);
    transform: translateX(4px);
}

.global-notes-panel .folder-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.global-notes-panel .folder-info {
    display: flex;
    align-items: center;
    gap: 10px;
}

.global-notes-panel .folder-icon {
    font-size: 22px;
}

.global-notes-panel .folder-name {
    font-weight: 600;
    font-size: 15px;
    color: var(--theme-text-primary);
}

.global-notes-panel .folder-count {
    font-size: 11px;
    color: var(--theme-text-muted);
    background: var(--theme-bg-tertiary);
    padding: 2px 8px;
    border-radius: 10px;
}

.global-notes-panel .folder-actions {
    display: flex;
    gap: 6px;
    opacity: 0;
    transition: opacity 0.2s;
}

.global-notes-panel .folder-item:hover .folder-actions {
    opacity: 1;
}

.global-notes-panel .folder-action-btn {
    background: var(--theme-bg-tertiary);
    border: none;
    width: 28px;
    height: 28px;
    border-radius: 6px;
    color: var(--theme-text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
}

.global-notes-panel .folder-action-btn:hover {
    background: var(--theme-bg-hover);
    color: var(--theme-text-primary);
}

/* ========== Note Item ========== */
.global-notes-panel .note-item {
    background: var(--theme-bg-secondary);
    border-radius: 10px;
    padding: 14px;
    border: 1px solid var(--theme-border-color);
    transition: all 0.2s;
}

.global-notes-panel .note-item:hover {
    background: var(--theme-bg-tertiary);
    border-color: var(--theme-border-color);
}

.global-notes-panel .note-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
}

.global-notes-panel .note-title {
    font-weight: 600;
    font-size: 14px;
    color: var(--theme-text-primary);
    flex: 1;
}

.global-notes-panel .note-star {
    background: none;
    border: none;
    font-size: 16px;
    cursor: pointer;
    color: var(--theme-text-muted);
    transition: color 0.2s;
}

.global-notes-panel .note-star.starred {
    color: #ffd700;
}

.global-notes-panel .note-content {
    font-size: 13px;
    color: var(--theme-text-primary);
    line-height: 1.5;
    margin-bottom: 10px;
    word-wrap: break-word;
}

.global-notes-panel .note-preview {
    font-size: 13px;
    color: #888;
    line-height: 1.4;
    margin: 8px 0;
    word-wrap: break-word;
}

.global-notes-panel .note-meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 11px;
    color: #666;
}

.global-notes-panel .note-pdf {
    display: flex;
    align-items: center;
    gap: 4px;
    max-width: 150px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.global-notes-panel .note-page {
    color: #888;
}

.global-notes-panel .note-date {
    color: #666;
}

.global-notes-panel .note-actions {
    display: flex;
    gap: 4px;
    opacity: 0;
    transition: opacity 0.2s;
}

.global-notes-panel .note-item:hover .note-actions {
    opacity: 1;
}

.global-notes-panel .note-action-btn {
    background: #3c3c3c;
    border: none;
    width: 26px;
    height: 26px;
    border-radius: 5px;
    color: #aaa;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
}

.global-notes-panel .note-action-btn:hover {
    background: #4a4a4a;
    color: #e0e0e0;
}

.global-notes-panel .note-action-btn.delete:hover {
    background: #d32f2f;
    color: white;
}

/* ========== Notes Footer ========== */
.global-notes-panel .notes-footer {
    padding: 12px 16px;
    background: #252525;
    border-top: 1px solid #333;
    text-align: center;
}

.global-notes-panel .notes-count {
    font-size: 12px;
    color: #888;
}

/* ========== Empty State ========== */
.global-notes-panel .notes-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    text-align: center;
}

.global-notes-panel .notes-empty-icon,
.global-notes-panel .empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
    opacity: 0.5;
}

.global-notes-panel .notes-empty-text,
.global-notes-panel .empty-text {
    color: #888;
    font-size: 14px;
    margin-bottom: 16px;
}

.global-notes-panel .empty-hint {
    font-size: 13px;
    color: #666;
}

.global-notes-panel .notes-empty-btn {
    padding: 10px 24px;
    background: #667eea;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: background 0.2s;
}

.global-notes-panel .notes-empty-btn:hover {
    background: #5a6fd6;
}

/* ========== Notes Dialog ========== */
.notes-dialog-overlay {
    position: fixed;
    top: 40px;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9998;
    backdrop-filter: blur(4px);
}

.notes-dialog {
    background: #2d2d2d;
    border-radius: 12px;
    width: 400px;
    max-width: 90%;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
    overflow: hidden;
}

.notes-dialog-header {
    padding: 16px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.notes-dialog-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
}

.notes-dialog-content {
    padding: 20px;
}

.notes-dialog-content label {
    display: block;
    margin-bottom: 6px;
    font-size: 13px;
    color: #aaa;
}

.notes-dialog-content input,
.notes-dialog-content textarea,
.notes-dialog-content select {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #444;
    border-radius: 8px;
    background: #3c3c3c;
    color: #e0e0e0;
    font-size: 14px;
    margin-bottom: 14px;
    box-sizing: border-box;
    font-family: inherit;
}

.notes-dialog-content textarea {
    min-height: 120px;
    resize: vertical;
}

.notes-dialog-content input:focus,
.notes-dialog-content textarea:focus,
.notes-dialog-content select:focus {
    outline: none;
    border-color: #667eea;
}

.notes-dialog-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    padding: 14px 20px;
    background: #252525;
    border-top: 1px solid #333;
}

.notes-dialog-btn {
    padding: 8px 20px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    transition: background 0.2s;
}

.notes-dialog-btn.cancel {
    background: #3c3c3c;
    color: #e0e0e0;
}

.notes-dialog-btn.cancel:hover {
    background: #4a4a4a;
}

.notes-dialog-btn.save {
    background: #667eea;
    color: white;
}

.notes-dialog-btn.save:hover {
    background: #5a6fd6;
}

/* ========== Toast ========== */
.notes-toast {
    position: fixed;
    bottom: 24px;
    right: 24px;
    left: auto;
    transform: translateX(100%);
    opacity: 0;
    background: #1e1e3f;
    color: #ffffff;
    padding: 16px 24px;
    border-radius: 10px;
    border: 1px solid #2a2a4a;
    border-left: 4px solid #10b981;
    font-size: 14px;
    font-weight: 600;
    z-index: 100020;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    max-width: 420px;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    transition: opacity 0.25s ease, transform 0.25s ease;
}

.notes-toast.show {
    transform: translateX(0);
    opacity: 1;
}

/* ========== Color Picker ========== */
.notes-color-picker,
.folder-color-picker {
    display: flex;
    gap: 8px;
    margin-bottom: 14px;
    flex-wrap: wrap;
}

.notes-color-option,
.color-option {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 3px solid transparent;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.notes-color-option:hover,
.color-option:hover {
    transform: scale(1.15);
}

.notes-color-option.selected,
.color-option.selected {
    border-color: #fff;
    box-shadow: 0 0 0 3px #667eea, 0 2px 8px rgba(0, 0, 0, 0.3);
    transform: scale(1.1);
}

.color-picker-label {
    font-size: 13px;
    color: #aaa;
    margin-bottom: 8px;
    margin-top: 12px;
}

/* Note color dot */
.note-color-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
    margin-right: 8px;
}

/* Current PDF badge */
.current-pdf-badge {
    background: #667eea;
    color: white;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 500;
}

/* ========== Note Folder Styles ========== */
.global-notes-panel .note-folder {
    background: linear-gradient(135deg, #3c3c3c 0%, #2d2d2d 100%);
    border-radius: 12px;
    padding: 16px;
    cursor: pointer;
    transition: all 0.2s;
    border: 1px solid #444;
    margin-bottom: 8px;
}

.global-notes-panel .note-folder:hover {
    background: linear-gradient(135deg, #4a4a4a 0%, #3c3c3c 100%);
    transform: translateX(4px);
    border-color: #667eea;
}

.global-notes-panel .note-folder .folder-header {
    display: flex;
    align-items: center;
    gap: 12px;
}

.global-notes-panel .note-folder .folder-icon {
    font-size: 28px;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.global-notes-panel .note-folder .folder-name {
    font-weight: 600;
    font-size: 15px;
    color: #ffffff;
    flex: 1;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.global-notes-panel .note-folder .folder-count {
    font-size: 12px;
    color: #ffffff;
    background: rgba(102, 126, 234, 0.8);
    padding: 4px 12px;
    border-radius: 12px;
    font-weight: 500;
}

.global-notes-panel .note-folder .folder-actions {
    display: flex;
    gap: 6px;
    opacity: 0;
    transition: opacity 0.2s;
}

.global-notes-panel .note-folder:hover .folder-actions {
    opacity: 1;
}

/* ========== Note Dialog ========== */
.note-dialog-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10001;
    backdrop-filter: blur(4px);
}

.note-dialog {
    background: #2d2d2d;
    border-radius: 12px;
    width: 450px;
    max-width: 90%;
    max-height: 80vh;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
    display: flex;
    flex-direction: column;
}

.note-dialog.small {
    width: 350px;
}

.note-dialog-header {
    padding: 16px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.note-dialog-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
}

.note-dialog-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    width: 28px;
    height: 28px;
    border-radius: 6px;
    color: white;
    font-size: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.note-dialog-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.note-dialog-body {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
}

.note-dialog-body .note-title-input {
    width: 100%;
    padding: 12px 14px;
    border: 1px solid #444;
    border-radius: 8px;
    background: #3c3c3c;
    color: #e0e0e0;
    font-size: 15px;
    margin-bottom: 12px;
    box-sizing: border-box;
}

.note-dialog-body .note-content-input {
    width: 100%;
    padding: 12px 14px;
    border: 1px solid #444;
    border-radius: 8px;
    background: #3c3c3c;
    color: #e0e0e0;
    font-size: 14px;
    line-height: 1.5;
    resize: vertical;
    min-height: 150px;
    box-sizing: border-box;
    font-family: inherit;
}

.note-dialog-body input:focus,
.note-dialog-body textarea:focus {
    outline: none;
    border-color: #667eea;
}

.note-dialog-meta {
    margin-top: 12px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.note-dialog-meta label {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: #aaa;
    cursor: pointer;
}

.note-dialog-meta input[type="checkbox"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
}

.note-folder-select {
    margin-top: 12px;
}

.note-folder-select label {
    display: block;
    margin-bottom: 6px;
    font-size: 13px;
    color: #aaa;
}

.note-folder-select select {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #444;
    border-radius: 8px;
    background: #3c3c3c;
    color: #e0e0e0;
    font-size: 14px;
    cursor: pointer;
}

.note-folder-select select:focus {
    outline: none;
    border-color: #667eea;
}

.note-dialog-footer {
    padding: 14px 20px;
    background: #252525;
    border-top: 1px solid #333;
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

.note-dialog-btn {
    padding: 8px 18px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    transition: background 0.2s;
}

.note-dialog-btn.cancel-btn,
.note-dialog-btn.close-btn {
    background: #3c3c3c;
    color: #e0e0e0;
}

.note-dialog-btn.cancel-btn:hover,
.note-dialog-btn.close-btn:hover {
    background: #4a4a4a;
}

.note-dialog-btn.save-btn,
.note-dialog-btn.primary {
    background: #667eea;
    color: white;
}

.note-dialog-btn.save-btn:hover,
.note-dialog-btn.primary:hover {
    background: #5a6fd6;
}

.note-dialog-btn.edit-btn {
    background: #3c3c3c;
    color: #e0e0e0;
}

.note-dialog-btn.goto-btn {
    background: #10b981;
    color: white;
}

.note-dialog-btn.goto-btn:hover {
    background: #059669;
}

/* Note view mode */
.note-dialog.view-mode .note-view-content {
    font-size: 14px;
    line-height: 1.6;
    color: var(--theme-text-primary);
    white-space: pre-wrap;
    word-wrap: break-word;
}

.note-view-meta {
    margin-top: 16px;
    padding-top: 12px;
    border-top: 1px solid #444;
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
}

.note-view-meta .meta-item {
    font-size: 12px;
    color: #888;
    display: flex;
    align-items: center;
    gap: 4px;
}

/* Folder list in move dialog */
.folder-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.folder-option {
    padding: 12px 14px;
    border-radius: 8px;
    background: #3c3c3c;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: #e0e0e0;
}

.folder-option:hover {
    background: #4a4a4a;
}

.folder-option.selected {
    background: #667eea;
    color: white;
}

/* Note color picker in edit dialog */
.note-color-picker {
    margin-top: 12px;
}

.note-color-picker label {
    display: block;
    font-size: 13px;
    color: #aaa;
    margin-bottom: 8px;
}

.note-color-picker .color-options {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.note-color-picker .color-option {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.2s ease;
}

.note-color-picker .color-option:hover {
    transform: scale(1.1);
}

.note-color-picker .color-option.selected {
    border-color: #fff;
    box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.5);
}

/* ========== Light Theme ========== */
body.theme-light .global-notes-panel {
    background: #ffffff;
    border-left-color: #e0e0e0;
}

body.theme-light .global-notes-panel .notes-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

body.theme-light .global-notes-panel .notes-header h2 {
    color: #fff;
}

body.theme-light .global-notes-panel .notes-toolbar,
body.theme-light .global-notes-panel .notes-filters,
body.theme-light .global-notes-panel .notes-footer {
    background: #f5f5f5;
    border-color: #e0e0e0;
}

body.theme-light .global-notes-panel .notes-breadcrumb {
    background: #fafafa;
    border-color: #e0e0e0;
}

body.theme-light .global-notes-panel .breadcrumb-item {
    color: #555;
}

body.theme-light .global-notes-panel .folder-item,
body.theme-light .global-notes-panel .note-item {
    background: #f9f9f9;
    border-color: #e0e0e0;
}

body.theme-light .global-notes-panel .folder-item:hover,
body.theme-light .global-notes-panel .note-item:hover {
    background: #f0f0f0;
}

body.theme-light .global-notes-panel .notes-search-input {
    background: #fff;
    border-color: #ddd;
    color: #333;
}

body.theme-light .global-notes-panel .notes-search-input::placeholder {
    color: #999;
}

body.theme-light .global-notes-panel .notes-btn,
body.theme-light .global-notes-panel .filter-btn {
    background: #e8e8e8;
    color: #555;
}

body.theme-light .global-notes-panel .filter-btn.active {
    background: #667eea;
    color: white;
}

body.theme-light .global-notes-panel .note-title,
body.theme-light .global-notes-panel .folder-name {
    color: #333;
}

body.theme-light .global-notes-panel .note-preview,
body.theme-light .global-notes-panel .note-meta {
    color: #666;
}

body.theme-light .global-notes-panel .notes-count {
    color: #666;
}

body.theme-light .global-notes-panel .notes-empty .empty-text {
    color: #666;
}

body.theme-light .global-notes-panel .notes-empty .empty-hint {
    color: #999;
}

body.theme-light .color-picker-label {
    color: #555;
}

body.theme-light .global-notes-panel .note-content {
    color: #666;
}

body.theme-light .notes-dialog {
    background: #fff;
}

body.theme-light .notes-dialog-content input,
body.theme-light .notes-dialog-content textarea,
body.theme-light .notes-dialog-content select {
    background: #f5f5f5;
    border-color: #ddd;
    color: #333;
}

body.theme-light .notes-dialog-actions {
    background: #f5f5f5;
    border-color: #e0e0e0;
}

body.theme-light .notes-toast {
    background: #333;
    color: #fff;
}

body.theme-light .global-notes-panel .note-folder {
    background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
    border-color: #ddd;
}

body.theme-light .global-notes-panel .note-folder:hover {
    background: linear-gradient(135deg, #e8e8e8 0%, #ddd 100%);
}

body.theme-light .global-notes-panel .note-folder .folder-name {
    color: #333;
    text-shadow: none;
}

body.theme-light .global-notes-panel .note-folder .folder-count {
    background: #667eea;
    color: #fff;
}

body.theme-light .global-notes-panel .folder-action-btn {
    background: rgba(0, 0, 0, 0.05);
    color: #666;
}

body.theme-light .global-notes-panel .folder-action-btn:hover {
    background: rgba(0, 0, 0, 0.1);
    color: #333;
}

body.theme-light .note-dialog {
    background: #fff;
}

body.theme-light .note-dialog-body .note-title-input,
body.theme-light .note-dialog-body .note-content-input,
body.theme-light .note-folder-select select {
    background: #f5f5f5;
    border-color: #ddd;
    color: #333;
}

body.theme-light .note-dialog-footer {
    background: #f5f5f5;
    border-color: #e0e0e0;
}

body.theme-light .note-dialog-meta label {
    color: #666;
}

body.theme-light .folder-option {
    background: #f0f0f0;
    color: #333;
}

body.theme-light .folder-option:hover {
    background: #e0e0e0;
}

body.theme-light .note-view-content {
    color: #333;
}

body.theme-light .note-view-meta {
    border-color: #e0e0e0;
}

body.theme-light .note-color-picker label {
    color: #666;
}

body.theme-light .note-color-picker .color-option.selected {
    border-color: #333;
    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.2);
}

/* ========== Pages Feature Styles ========== */

/* Page list item */
.note-page-item {
    background: #2d2d2d;
    border-radius: 8px;
    padding: 14px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.note-page-item:hover {
    background: #3a3a3a;
    transform: translateX(2px);
}

.note-page-item .page-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
}

.note-page-item .page-icon {
    font-size: 20px;
}
.note-page-item .page-title {
    flex: 1;
    font-weight: 600;
    color: var(--theme-text-primary);
    font-size: 15px;
}

.note-page-item .page-actions {
    display: flex;
    gap: 4px;
    opacity: 0;
    transition: opacity 0.2s;
}

.note-page-item:hover .page-actions {
    opacity: 1;
}

.page-action-btn {
    background: transparent;
    border: none;
    padding: 4px 8px;
    cursor: pointer;
    font-size: 14px;
    border-radius: 4px;
    transition: background 0.2s;
}

.page-action-btn:hover {
    background: rgba(255, 255, 255, 0.1);
}

.note-page-item .page-preview {
    color: #888;
    font-size: 13px;
    line-height: 1.4;
    margin-bottom: 8px;
}

.note-page-item .page-meta {
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    color: #666;
}

/* Page Editor */
.page-editor {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.page-editor-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid #444;
    margin-bottom: 12px;
}

.page-editor-header .page-title-input {
    flex: 1;
    background: #3c3c3c;
    border: 1px solid #555;
    border-radius: 6px;
    padding: 10px 14px;
    font-size: 18px;
    font-weight: 600;
    color: #e0e0e0;
}

.page-editor-header .page-title-input:focus {
    outline: none;
    border-color: #667eea;
}

.page-editor-actions {
    display: flex;
    gap: 8px;
}

.page-editor-btn {
    background: #667eea;
    color: white;
    border: none;
    padding: 8px 14px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    transition: background 0.2s;
}

.page-editor-btn:hover {
    background: #5a6fd6;
}

.page-editor-body {
    flex: 1;
    margin-bottom: 16px;
}

.page-editor-body .page-content-editor {
    width: 100%;
    height: 200px;
    background: #3c3c3c;
    border: 1px solid #555;
    border-radius: 8px;
    padding: 14px;
    font-size: 14px;
    line-height: 1.6;
    color: #e0e0e0;
    resize: vertical;
    font-family: inherit;
}

.page-editor-body .page-content-editor:focus {
    outline: none;
    border-color: #667eea;
}

/* Page Notes Section */
.page-notes-section {
    border-top: 1px solid #444;
    padding-top: 12px;
}

.page-notes-section h4 {
    color: #aaa;
    font-size: 14px;
    margin-bottom: 12px;
}

.page-notes-list {
    max-height: 200px;
    overflow-y: auto;
}

.page-notes-empty {
    color: #666;
    font-size: 13px;
    text-align: center;
    padding: 16px;
}

.page-note-item {
    background: #3a3a3a;
    border-radius: 6px;
    padding: 10px;
    margin-bottom: 8px;
}

.page-note-item .page-note-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 6px;
}

.page-note-item .page-note-title {
    font-weight: 500;
    color: #e0e0e0;
    font-size: 13px;
}

.page-note-item .page-note-actions {
    display: flex;
    gap: 4px;
}

.page-note-btn {
    background: transparent;
    border: none;
    padding: 4px 6px;
    cursor: pointer;
    font-size: 12px;
    border-radius: 4px;
    transition: background 0.2s;
}

.page-note-btn:hover {
    background: rgba(255, 255, 255, 0.1);
}

.page-note-item .page-note-preview {
    color: #888;
    font-size: 12px;
    line-height: 1.4;
}

/* Light theme for Pages */
body.theme-light .note-page-item {
    background: #f5f5f5;
}

body.theme-light .note-page-item:hover {
    background: #e8e8e8;
}

body.theme-light .note-page-item .page-title {
    color: #333;
}

body.theme-light .page-editor-header .page-title-input {
    background: #fff;
    border-color: #ddd;
    color: #333;
}

body.theme-light .page-editor-body .page-content-editor {
    background: #fff;
    border-color: #ddd;
    color: #333;
}

body.theme-light .page-notes-section {
    border-color: #e0e0e0;
}

body.theme-light .page-note-item {
    background: #e8e8e8;
}

body.theme-light .page-note-item .page-note-title {
    color: #333;
}


/* ========== _document-editor.css ========== */
/**
 * Document Editor Styles - Full-screen editor like Google Docs
 */

/* Overlay */
.doc-editor-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #1a1a2e;
    z-index: 10000;
    display: none;
    overflow: hidden;
}

.doc-editor-overlay.visible {
    display: block;
}

.doc-editor-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
}

/* ========== Document List View ========== */
.doc-list-view {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 40px;
    overflow-y: auto;
}

.doc-list-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
}

.doc-list-header h1 {
    font-size: 2rem;
    color: #fff;
    font-weight: 600;
}

.doc-close-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: #2d2d4a;
    color: #fff;
    font-size: 24px;
    border-radius: 50%;
    cursor: pointer;
    transition: background 0.2s;
}

.doc-close-btn:hover {
    background: #ef4444;
}

.doc-list-actions {
    margin-bottom: 30px;
}

.doc-btn-primary {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background: #6366f1;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
}

.doc-btn-primary:hover {
    background: #4f46e5;
}

.doc-list-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 20px;
}

/* Document Card */
.doc-card {
    background: #252550;
    border-radius: 12px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.2s;
    border: 2px solid transparent;
}

.doc-card:hover {
    border-color: #6366f1;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
}

.doc-card-preview {
    height: 150px;
    background: #2d2d5a;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
}

.doc-card-icon {
    font-size: 40px;
    margin-bottom: 10px;
}

.doc-card-text {
    font-size: 12px;
    color: #888;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
}

.doc-card-info {
    padding: 15px;
}

.doc-card-title {
    font-weight: 600;
    color: #fff;
    margin-bottom: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.doc-card-date {
    font-size: 12px;
    color: #888;
}

.doc-card-actions {
    display: flex;
    gap: 8px;
    padding: 0 15px 15px;
}

.doc-card-btn {
    padding: 6px 12px;
    background: #3a3a6a;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s;
}

.doc-card-btn:hover {
    background: #4a4a8a;
}

.doc-delete-btn:hover {
    background: #ef4444;
}

/* Empty state */
.doc-empty-state {
    grid-column: 1 / -1;
    text-align: center;
    padding: 60px 20px;
    color: #888;
}

.doc-empty-state .empty-icon {
    font-size: 60px;
    margin-bottom: 20px;
}

.doc-empty-state h3 {
    color: #fff;
    margin-bottom: 10px;
}

/* ========== Document Editor View ========== */
.doc-editor-view {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    background: #f5f5f5;
}

.doc-editor-view.hidden {
    display: none;
}

/* Top Bar */
.doc-editor-topbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background: #1a1a2e;
    border-bottom: 1px solid #2d2d4a;
}

.doc-editor-left {
    display: flex;
    align-items: center;
    gap: 15px;
}

.doc-back-btn {
    padding: 8px 16px;
    background: #2d2d4a;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s;
}

.doc-back-btn:hover {
    background: #3d3d6a;
}

.doc-title-input {
    background: transparent;
    border: none;
    color: #fff;
    font-size: 18px;
    font-weight: 600;
    padding: 8px;
    min-width: 300px;
    border-radius: 6px;
}

.doc-title-input:focus {
    outline: none;
    background: #2d2d4a;
}

.doc-editor-right {
    display: flex;
    align-items: center;
    gap: 12px;
}

.doc-save-status {
    color: #10b981;
    font-size: 13px;
}

.doc-action-btn {
    padding: 8px 16px;
    background: #6366f1;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s;
}

.doc-action-btn:hover {
    background: #4f46e5;
}

/* Format Toolbar */
.doc-format-toolbar {
    display: flex;
    align-items: center;
    padding: 8px 20px;
    background: #fff;
    border-bottom: 1px solid #e0e0e0;
    gap: 8px;
    flex-wrap: wrap;
}

.format-group {
    display: flex;
    align-items: center;
    gap: 4px;
}

.format-divider {
    width: 1px;
    height: 24px;
    background: #e0e0e0;
    margin: 0 8px;
}

.format-select {
    padding: 6px 12px;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    background: #fff;
    font-size: 14px;
    cursor: pointer;
}

.format-btn {
    width: 32px;
    height: 32px;
    border: 1px solid transparent;
    background: transparent;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    color: #333;
}

.format-btn:hover {
    background: #e8e8e8;
    border-color: #d0d0d0;
}

.format-btn:active {
    background: #d0d0d0;
}

.format-color {
    width: 32px;
    height: 32px;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    cursor: pointer;
    padding: 2px;
}

/* Editor Content Area */
.doc-editor-content {
    flex: 1;
    overflow-y: auto;
    padding: 40px;
    display: flex;
    justify-content: center;
}

.doc-page {
    width: 100%;
    max-width: 816px;
    /* Standard US Letter width in pixels at 96 DPI */
    min-height: 1056px;
    /* Standard US Letter height */
    background: #fff;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    border-radius: 4px;
}

.doc-editor-area {
    padding: 72px;
    /* 1 inch margins */
    min-height: 100%;
    outline: none;
    font-family: 'Times New Roman', serif;
    font-size: 16px;
    line-height: 1.8;
    color: #333;
}

.doc-editor-area:focus {
    outline: none;
}

.doc-editor-area p {
    margin-bottom: 1em;
}

.doc-editor-area h1 {
    font-size: 2em;
    margin-bottom: 0.5em;
    color: #1a1a1a;
}

.doc-editor-area h2 {
    font-size: 1.5em;
    margin-bottom: 0.5em;
    color: #1a1a1a;
}

.doc-editor-area h3 {
    font-size: 1.25em;
    margin-bottom: 0.5em;
    color: #1a1a1a;
}

.doc-editor-area ul,
.doc-editor-area ol {
    margin-left: 24px;
    margin-bottom: 1em;
}

/* Notes Sidebar */
.doc-notes-sidebar {
    position: fixed;
    right: 0;
    top: 0;
    bottom: 0;
    width: 350px;
    background: #1a1a2e;
    box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    z-index: 100;
}

.doc-notes-sidebar.hidden {
    display: none;
}

.notes-sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    border-bottom: 1px solid #2d2d4a;
}

.notes-sidebar-header h3 {
    color: #fff;
    font-size: 16px;
}

.notes-sidebar-close {
    width: 32px;
    height: 32px;
    background: #2d2d4a;
    border: none;
    color: #fff;
    font-size: 20px;
    border-radius: 50%;
    cursor: pointer;
}

.notes-sidebar-close:hover {
    background: #ef4444;
}

.notes-sidebar-content {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
}

.notes-section h4 {
    color: #888;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 15px;
}

.available-notes-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.available-note {
    background: #252550;
    border-radius: 8px;
    padding: 12px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    transition: background 0.2s;
}

.available-note:hover {
    background: #2d2d5a;
}

.available-note.attached {
    border-left: 3px solid #6366f1;
}

.available-note-info {
    flex: 1;
    min-width: 0;
}

.available-note-title {
    color: #fff;
    font-weight: 500;
    margin-bottom: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.available-note-preview {
    color: #888;
    font-size: 12px;
    line-height: 1.4;
}

.available-note-actions {
    display: flex;
    gap: 6px;
    margin-left: 10px;
}

.note-action-btn {
    width: 28px;
    height: 28px;
    background: #3a3a6a;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
}

.note-action-btn:hover {
    background: #4a4a8a;
}

.notes-empty {
    text-align: center;
    padding: 40px 20px;
    color: #888;
}

.notes-empty .hint {
    font-size: 12px;
    margin-top: 10px;
    color: #666;
}

/* Hidden utility */
.hidden {
    display: none !important;
}

/* Light theme adjustments for doc list */
body.theme-light .doc-editor-overlay {
    background: #f5f5f7;
}

body.theme-light .doc-list-header h1 {
    color: #1a1a2e;
}

body.theme-light .doc-close-btn {
    background: #e0e0e8;
    color: #1a1a2e;
}

body.theme-light .doc-card {
    background: #fff;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

body.theme-light .doc-card-preview {
    background: #f0f0f5;
}

body.theme-light .doc-card-title {
    color: #1a1a2e;
}

body.theme-light .doc-editor-topbar {
    background: #fff;
    border-bottom: 1px solid #e0e0e8;
}

body.theme-light .doc-back-btn {
    background: #e0e0e8;
    color: #1a1a2e;
}

body.theme-light .doc-title-input {
    color: #1a1a2e;
}

body.theme-light .doc-title-input:focus {
    background: #f0f0f5;
}


/* ========== _research-library.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - RESEARCH LIBRARY STYLES
 * ============================================================================
 */

/* ========== Research Library Panel ========== */
.research-library-panel {
    position: fixed;
    top: 50px;
    right: 10px;
    width: 400px;
    max-height: calc(100vh - 70px);
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    z-index: 10000;
    display: none;
    flex-direction: column;
    overflow: hidden;
}

.research-library-panel.open {
    display: flex;
    animation: slideInRight 0.3s ease;
}

.research-library-panel.hidden {
    display: none;
}

.library-panel-header {
    padding: 14px 16px;
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
}

.library-panel-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
}

.library-panel-close {
    position: absolute;
    top: 10px;
    right: 12px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    font-size: 18px;
    cursor: pointer;
}

.library-panel-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* ========== Library Search ========== */
.library-search {
    display: flex;
    gap: 8px;
    padding: 12px;
    border-bottom: 1px solid #eee;
}

.library-search input {
    flex: 1;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 13px;
}

.library-search select {
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 12px;
    background: #fff;
}

.library-stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    background: #f8f9fa;
    font-size: 12px;
    color: #666;
}

.library-actions {
    display: flex;
    gap: 6px;
}

.library-list {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.library-empty {
    text-align: center;
    color: #888;
    padding: 30px 20px;
    font-size: 13px;
}

/* ========== Library Item ========== */
.library-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    background: #fff;
    border: 1px solid #e9ecef;
    border-radius: 10px;
    padding: 12px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    min-height: 70px;
    box-sizing: border-box;
}

.library-item:hover {
    border-color: #667eea;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.library-item.current {
    border-color: #22c55e;
    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
    box-shadow: 0 2px 8px rgba(34, 197, 94, 0.2);
    border-left: 4px solid #22c55e;
}

.library-item.needs-link {
    border-left: 3px solid #f59e0b;
}

.library-item.needs-link:hover {
    background: #fffbeb;
}

/* ========== Badges ========== */
.reading-badge {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    margin-left: 8px;
    padding: 3px 10px;
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
    font-size: 10px;
    font-weight: 700;
    border-radius: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 4px rgba(34, 197, 94, 0.3);
    vertical-align: middle;
}

.local-badge {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    margin-left: 8px;
    padding: 2px 8px;
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    font-size: 9px;
    font-weight: 600;
    border-radius: 10px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    vertical-align: middle;
}

.stored-badge {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    margin-left: 8px;
    padding: 2px 8px;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    font-size: 9px;
    font-weight: 600;
    border-radius: 10px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    vertical-align: middle;
}

.current-badge {
    position: absolute;
    bottom: 8px;
    right: 8px;
    background: #f5576c;
    color: white;
    padding: 3px 8px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 500;
}

.library-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #f5576c;
    color: white;
    font-size: 10px;
    min-width: 16px;
    height: 16px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.library-badge.hidden {
    display: none;
}

/* ========== Library Item Details ========== */
.item-filename {
    font-size: 10px;
    color: #888;
    font-style: italic;
}

.item-size {
    font-size: 10px;
    color: #666;
    background: #f0f0f0;
    padding: 1px 5px;
    border-radius: 4px;
}

.library-item-main {
    display: flex;
    gap: 12px;
}

.library-item-icon {
    font-size: 28px;
}

.library-item-info {
    flex: 1;
    min-width: 0;
}

.library-item-title {
    font-size: 14px;
    font-weight: 600;
    color: #333;
    margin-bottom: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.library-item-meta {
    display: flex;
    gap: 12px;
    font-size: 11px;
    color: #888;
    margin-bottom: 6px;
}

.library-item-tags {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
}

.library-item-tags .tag {
    background: #e9ecef;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 10px;
    color: #666;
}

.library-item-actions {
    display: flex;
    gap: 4px;
    position: absolute;
    top: 8px;
    right: 8px;
    opacity: 0;
    transition: opacity 0.2s;
}

.library-item:hover .library-item-actions {
    opacity: 1;
}

.lib-action-btn {
    background: #f8f9fa;
    border: none;
    width: 26px;
    height: 26px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    transition: background 0.2s;
}

.lib-action-btn:hover {
    background: #e9ecef;
}

.lib-action-btn.favorite-btn.active {
    background: #fff3cd;
}

/* ========== Library Header (Folder System) ========== */
.library-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.library-header h2 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
}

.library-close-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    font-size: 18px;
    cursor: pointer;
    transition: background 0.2s;
}

.library-close-btn:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* ========== Library Toolbar ========== */
.library-toolbar {
    padding: 12px;
    border-bottom: 1px solid #eee;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.library-search-input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 13px;
    box-sizing: border-box;
}

.library-btn {
    background: #f8f9fa;
    border: 1px solid #ddd;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 4px;
    transition: all 0.2s;
}

.library-btn:hover {
    background: #e9ecef;
    border-color: #667eea;
}

.library-btn-small {
    padding: 4px 8px;
    font-size: 11px;
}

/* ========== Library Filters ========== */
.library-filters {
    display: flex;
    gap: 6px;
    padding: 8px 12px;
    border-bottom: 1px solid #eee;
}

.filter-btn {
    background: transparent;
    border: none;
    padding: 6px 12px;
    border-radius: 16px;
    font-size: 12px;
    cursor: pointer;
    color: #666;
    transition: all 0.2s;
}

.filter-btn:hover {
    background: #f0f0f0;
}

.filter-btn.active {
    background: #667eea;
    color: white;
}

/* ========== Library Breadcrumb ========== */
.library-breadcrumb {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: #f8f9fa;
    font-size: 12px;
}

.breadcrumb-item {
    cursor: pointer;
    color: #667eea;
}

.breadcrumb-item:hover {
    text-decoration: underline;
}

.breadcrumb-item.active {
    color: #333;
    font-weight: 500;
}

.breadcrumb-separator {
    color: #999;
}

/* ========== Library Content ========== */
.library-content {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.library-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    border-top: 1px solid #eee;
    background: #f8f9fa;
    gap: 10px;
}

.library-count {
    font-size: 12px;
    color: #666;
}

.library-storage-info {
    font-size: 11px;
    color: #3b82f6;
    background: #eff6ff;
    padding: 3px 8px;
    border-radius: 12px;
    cursor: help;
}

/* ========== Folder Styles ========== */
.library-folder {
    background: #f0f4ff;
    border: 1px solid #d0d9f0;
    border-radius: 10px;
    margin-bottom: 8px;
    transition: all 0.2s;
}

.library-folder:hover {
    border-color: #667eea;
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.15);
}

.folder-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px;
    cursor: pointer;
}

.folder-icon {
    font-size: 24px;
}

.folder-name {
    flex: 1;
    font-weight: 600;
    color: #333;
}

.folder-count {
    font-size: 11px;
    color: #888;
    background: rgba(0, 0, 0, 0.05);
    padding: 2px 8px;
    border-radius: 10px;
}

.folder-actions {
    display: flex;
    gap: 4px;
    opacity: 0;
    transition: opacity 0.2s;
}

.library-folder:hover .folder-actions {
    opacity: 1;
}

.folder-action-btn {
    background: transparent;
    border: none;
    padding: 4px;
    cursor: pointer;
    font-size: 12px;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.folder-action-btn:hover {
    opacity: 1;
}

/* ========== Updated Library Item Styles ========== */
.item-icon {
    font-size: 32px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.item-info {
    flex: 1;
    min-width: 0;
}

.item-title {
    font-size: 14px;
    font-weight: 600;
    color: #333;
    margin-bottom: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.item-meta {
    display: flex;
    gap: 12px;
    font-size: 11px;
    color: #888;
}

.item-tags {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    margin-top: 4px;
}

.item-tag {
    background: #e9ecef;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 10px;
    color: #666;
}

.item-actions {
    display: flex;
    gap: 4px;
    opacity: 0;
    transition: opacity 0.2s;
}

.library-item:hover .item-actions {
    opacity: 1;
}

.item-action-btn {
    background: #f8f9fa;
    border: none;
    width: 26px;
    height: 26px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    transition: background 0.2s;
}

.item-action-btn:hover {
    background: #e9ecef;
}

.item-action-btn.active {
    background: #fff3cd;
}

/* ========== Folder Dialog ========== */
.folder-dialog-overlay {
    position: fixed;
    top: 40px;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9998;
}

.folder-dialog {
    background: white;
    border-radius: 12px;
    width: 90%;
    max-width: 400px;
    overflow: hidden;
    animation: fadeInUp 0.2s ease;
}

.folder-dialog-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.folder-dialog-header h3 {
    margin: 0;
    font-size: 14px;
}

.folder-dialog-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    font-size: 16px;
    cursor: pointer;
}

.folder-dialog-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.folder-dialog-content {
    padding: 16px;
    max-height: 300px;
    overflow-y: auto;
}

.folder-create-form {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.folder-name-input {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
    box-sizing: border-box;
}

.folder-color-picker {
    display: flex;
    align-items: center;
    gap: 10px;
}

.folder-color-input {
    width: 40px;
    height: 30px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.folder-create-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    color: white;
    padding: 10px 16px;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    transition: opacity 0.2s;
}

.folder-create-btn:hover {
    opacity: 0.9;
}

.folder-list-dialog {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.folder-option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.2s;
}

.folder-option:hover {
    background: #f0f4ff;
}

.folder-option-new {
    border-top: 1px solid #eee;
    margin-top: 8px;
    padding-top: 16px;
    color: #667eea;
}

/* ========== Edit Dialog ========== */
.edit-dialog-overlay {
    position: fixed;
    top: 40px;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9998;
}

.edit-dialog {
    background: white;
    border-radius: 12px;
    width: 90%;
    max-width: 450px;
    overflow: hidden;
}

.edit-dialog-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.edit-dialog-header h3 {
    margin: 0;
    font-size: 14px;
}

.edit-dialog-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    font-size: 16px;
    cursor: pointer;
}

.edit-dialog-content {
    padding: 16px;
}

.edit-field {
    margin-bottom: 12px;
}

.edit-field label {
    display: block;
    font-size: 12px;
    color: #666;
    margin-bottom: 4px;
}

.edit-field input,
.edit-field textarea {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 13px;
    box-sizing: border-box;
}

.edit-field textarea {
    resize: vertical;
}

.edit-dialog-footer {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    padding: 12px 16px;
    border-top: 1px solid #eee;
}

.edit-cancel-btn {
    background: #f8f9fa;
    border: 1px solid #ddd;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
}

.edit-save-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    color: white;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
}

/* ========== Library Edit Dialog ========== */
.library-edit-dialog {
    position: fixed;
    top: 40px;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9998;
}

.library-edit-content {
    background: white;
    padding: 20px;
    border-radius: 12px;
    width: 90%;
    max-width: 450px;
}

.library-edit-content h4 {
    margin: 0 0 16px 0;
    color: #333;
}

.library-edit-content .form-group {
    margin-bottom: 12px;
}

.library-edit-content label {
    display: block;
    font-size: 12px;
    color: #666;
    margin-bottom: 4px;
}

.library-edit-content input,
.library-edit-content textarea {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 13px;
    box-sizing: border-box;
}

.library-edit-content textarea {
    resize: vertical;
}

.edit-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 16px;
}

/* ========== Toast ========== */
.library-toast {
    position: fixed;
    bottom: 24px;
    right: 24px;
    left: auto;
    transform: translateX(100%);
    opacity: 0;
    background: #1e1e3f;
    color: #ffffff;
    padding: 16px 24px;
    border-radius: 10px;
    border: 1px solid #2a2a4a;
    border-left: 4px solid #6366f1;
    font-size: 14px;
    font-weight: 600;
    z-index: 100020;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    max-width: 420px;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    transition: opacity 0.25s ease, transform 0.25s ease;
}

.library-toast.show {
    transform: translateX(0);
    opacity: 1;
}

/* ========== Dark Theme ========== */
body.theme-dark .research-library-panel {
    background: #2d2d2d;
    color: #e0e0e0;
}

body.theme-dark .library-search {
    border-color: #444;
}

body.theme-dark .library-search input,
body.theme-dark .library-search select {
    background: #3c3c3c;
    border-color: #555;
    color: #e0e0e0;
}

body.theme-dark .library-stats {
    background: #363636;
}

body.theme-dark .library-item {
    background: #363636;
    border-color: #444;
}

body.theme-dark .library-item:hover {
    border-color: #667eea;
}

body.theme-dark .library-folder {
    background: #2a2a3d;
    border-color: #444;
}

body.theme-dark .library-folder:hover {
    border-color: #667eea;
}

body.theme-dark .folder-name {
    color: #e0e0e0;
}

body.theme-dark .library-toolbar,
body.theme-dark .library-filters,
body.theme-dark .library-footer {
    border-color: #444;
    background: #2d2d2d;
}

body.theme-dark .library-breadcrumb {
    background: #363636;
}

body.theme-dark .library-search-input,
body.theme-dark .library-btn {
    background: #3c3c3c;
    border-color: #555;
    color: #e0e0e0;
}

body.theme-dark .filter-btn {
    color: #aaa;
}

body.theme-dark .filter-btn:hover {
    background: #444;
}

body.theme-dark .filter-btn.active {
    background: #667eea;
    color: white;
}

body.theme-dark .folder-dialog,
body.theme-dark .edit-dialog {
    background: #2d2d2d;
    color: #e0e0e0;
}

body.theme-dark .folder-dialog-content,
body.theme-dark .edit-dialog-content {
    background: #2d2d2d;
}

body.theme-dark .folder-name-input,
body.theme-dark .edit-field input,
body.theme-dark .edit-field textarea {
    background: #3c3c3c;
    border-color: #555;
    color: #e0e0e0;
}

body.theme-dark .folder-option:hover {
    background: #3c3c3c;
}

body.theme-dark .edit-cancel-btn {
    background: #3c3c3c;
    border-color: #555;
    color: #e0e0e0;
}

body.theme-dark .item-title,
body.theme-dark .item-info {
    color: #e0e0e0;
}

body.theme-dark .item-action-btn {
    background: #3c3c3c;
    color: #e0e0e0;
}

body.theme-dark .item-action-btn:hover {
    background: #555;
}

/* ========== Responsive ========== */
@media (max-width: 768px) {
    .research-library-panel {
        width: calc(100% - 20px);
        right: 10px;
        left: 10px;
    }
}


/* ========== _vocabulary.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - VOCABULARY BUILDER STYLES
 * ============================================================================
 */

/* ========== Vocabulary Side Panel ========== */
.vocabulary-side-panel {
    position: fixed;
    top: 40px;
    right: -450px;
    width: 420px;
    height: calc(100vh - 40px);
    background: var(--theme-bg-primary);
    border-left: 1px solid var(--theme-border-color);
    z-index: 9998;
    display: flex;
    flex-direction: column;
    transition: right 0.3s ease;
    box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.vocabulary-side-panel.visible {
    right: 0;
}

.vocab-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    flex-shrink: 0;
}

.vocab-header h2 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: #fff;
}

.vocab-header-actions {
    display: flex;
    gap: 8px;
    align-items: center;
}

.vocab-settings-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    padding: 6px 10px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    transition: background 0.2s;
    color: #fff;
}

.vocab-settings-btn:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* ========== Vocabulary Tabs ========== */
.vocab-tabs {
    display: flex;
    background: #2d2d2d;
    border-bottom: 1px solid #404040;
    flex-shrink: 0;
}

.vocab-tab {
    flex: 1;
    padding: 12px 8px;
    border: none;
    background: transparent;
    font-size: 13px;
    font-weight: 500;
    color: #aaa;
    cursor: pointer;
    transition: all 0.2s;
    border-bottom: 3px solid transparent;
}

.vocab-tab:hover {
    background: rgba(102, 126, 234, 0.1);
    color: #667eea;
}

.vocab-tab.active {
    background: #1e1e1e;
    color: #667eea;
    border-bottom-color: #667eea;
}

.vocab-panel {
    padding: 16px;
    overflow-y: auto;
    flex: 1;
    background: #1e1e1e;
}

.vocab-panel.hidden {
    display: none;
}

/* ========== Add Word Form ========== */
.vocab-form {
    display: flex;
    flex-direction: column;
    gap: 14px;
}

.vocabulary-side-panel .form-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.vocabulary-side-panel .form-group label {
    font-size: 12px;
    font-weight: 600;
    color: #ccc;
}

.vocabulary-side-panel .form-group input,
.vocabulary-side-panel .form-group textarea,
.vocabulary-side-panel .form-group select {
    padding: 10px 12px;
    border: 1px solid #404040;
    border-radius: 8px;
    font-size: 14px;
    font-family: inherit;
    background: #2d2d2d;
    color: #e0e0e0;
    transition: border-color 0.2s;
}

.vocabulary-side-panel .form-group input:focus,
.vocabulary-side-panel .form-group textarea:focus,
.vocabulary-side-panel .form-group select:focus {
    border-color: #667eea;
    outline: none;
}

.vocabulary-side-panel .form-group input::placeholder,
.vocabulary-side-panel .form-group textarea::placeholder {
    color: #666;
}

.form-group textarea {
    resize: vertical;
    min-height: 60px;
}

.form-actions {
    display: flex;
    gap: 12px;
    margin-top: 8px;
}

.vocab-btn {
    padding: 10px 16px;
    border: none;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.vocab-btn.primary {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: #fff;
}

.vocab-btn.secondary {
    background: #3d3d3d;
    color: #ccc;
}

.vocab-btn.ai {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: #fff;
}

.vocab-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* ========== Vocabulary Settings Panel ========== */
.vocab-settings-panel {
    max-width: 100%;
}

.vocab-settings-panel h3 {
    margin: 0 0 16px 0;
    font-size: 16px;
    color: #e0e0e0;
}

.settings-section {
    background: #2d2d2d;
    padding: 14px;
    border-radius: 10px;
    margin-bottom: 16px;
}

.settings-section h4 {
    margin: 0 0 12px 0;
    font-size: 14px;
    color: #667eea;
}

.checkbox-group label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    font-weight: normal !important;
    color: #ccc;
}

.checkbox-group input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
}

.color-picker-row {
    display: flex;
    align-items: center;
    gap: 12px;
}

.color-picker-row input[type="color"] {
    width: 50px;
    height: 36px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    padding: 0;
}

.color-picker-row span {
    font-family: monospace;
    color: #aaa;
    font-size: 13px;
}

.settings-preview {
    margin-top: 14px;
    padding: 12px;
    background: #1e1e1e;
    border-radius: 8px;
    border: 1px solid #404040;
    color: #ccc;
}

.preview-word {
    padding: 2px 8px;
    border-radius: 4px;
    background: rgba(102, 126, 234, 0.4);
}

.settings-actions {
    display: flex;
    gap: 12px;
    margin-top: 20px;
}

/* ========== Word List ========== */
.vocab-search {
    display: flex;
    gap: 10px;
    margin-bottom: 14px;
}

.vocabulary-side-panel .vocab-search input {
    flex: 1;
    padding: 10px 12px;
    border: 1px solid #404040;
    border-radius: 8px;
    font-size: 14px;
    background: #2d2d2d;
    color: #e0e0e0;
}

.vocabulary-side-panel .vocab-search select {
    padding: 10px 12px;
    border: 1px solid #404040;
    border-radius: 8px;
    background: #2d2d2d;
    color: #e0e0e0;
}

.vocab-stats {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 14px;
    padding: 12px;
    background: #2d2d2d;
    border-radius: 8px;
    color: #ccc;
}

#totalWords {
    font-weight: 600;
    color: #667eea;
}

.small-btn {
    padding: 6px 12px;
    border: 1px solid #ddd;
    background: #fff;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
}

.small-btn:hover {
    background: #f0f0f0;
}

.vocab-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-height: 400px;
    overflow-y: auto;
}

/* ========== Vocabulary Card ========== */
.vocab-card {
    background: #2d2d2d;
    border: 1px solid #444;
    border-radius: 10px;
    padding: 16px;
    transition: box-shadow 0.2s;
}

.vocab-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.vocab-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.vocab-word {
    font-size: 18px;
    font-weight: 600;
    color: #e0e0e0;
}

.vocab-category {
    font-size: 11px;
    background: #1b5e20;
    color: #81c784;
    padding: 4px 10px;
    border-radius: 12px;
    text-transform: uppercase;
}

.vocab-translations {
    margin-bottom: 12px;
}

.translation {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 8px;
    background: #333;
    border-radius: 6px;
    margin-bottom: 6px;
    color: #ccc;
}

.translation.arabic {
    background: #3d2d1d;
}

.lang-label {
    font-size: 10px;
    font-weight: 700;
    background: #11998e;
    color: #fff;
    padding: 2px 6px;
    border-radius: 4px;
    flex-shrink: 0;
}

.translation.arabic .lang-label {
    background: #e65100;
}

.vocab-example {
    font-size: 13px;
    color: #aaa;
    font-style: italic;
    padding: 10px;
    background: #1e3a5f;
    border-radius: 6px;
    margin-bottom: 12px;
}

.example-label {
    font-weight: 600;
    color: #64b5f6;
    margin-right: 4px;
}

.example-translation {
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px dashed #3d5a80;
    color: #999;
    font-style: italic;
}

.vocab-card-footer {
    display: flex;
    align-items: center;
    gap: 12px;
}

.mastery-bar {
    flex: 1;
    height: 6px;
    background: #444;
    border-radius: 3px;
    overflow: hidden;
}

.mastery-fill {
    height: 100%;
    background: linear-gradient(90deg, #11998e, #38ef7d);
    transition: width 0.3s;
}

.mastery-text {
    font-size: 11px;
    color: #999;
    white-space: nowrap;
}

.vocab-actions {
    display: flex;
    gap: 4px;
}

.vocab-actions button {
    padding: 4px 8px;
    border: none;
    background: transparent;
    cursor: pointer;
    font-size: 14px;
    border-radius: 4px;
    color: #ccc;
}

.vocab-actions button:hover {
    background: #444;
}

.empty-state {
    text-align: center;
    padding: 40px;
    color: #888;
}

/* ========== Practice Mode ========== */
.practice-setup {
    text-align: center;
}

.practice-setup h3 {
    margin: 0 0 8px 0;
    color: #e0e0e0;
}

.practice-setup p {
    color: #999;
    margin-bottom: 24px;
}

.practice-options {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 24px;
    padding: 20px;
    background: #2d2d2d;
    border-radius: 12px;
}

.practice-options label {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    color: #ccc;
}

.practice-options select {
    padding: 8px 12px;
    border: 1px solid #444;
    border-radius: 6px;
    background: #333;
    color: #e0e0e0;
}

.practice-area {
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* ========== Flashcard ========== */
.flashcard-container {
    width: 100%;
    max-width: 400px;
    text-align: center;
}

.flashcard {
    width: 100%;
    height: 250px;
    perspective: 1000px;
    cursor: pointer;
    margin-bottom: 16px;
}

.flashcard-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.6s;
    transform-style: preserve-3d;
}

.flashcard.flipped .flashcard-inner {
    transform: rotateY(180deg);
}

.flashcard-front,
.flashcard-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    box-sizing: border-box;
}

.flashcard-front {
    background: linear-gradient(135deg, #11998e, #38ef7d);
    color: #fff;
    font-size: 28px;
    font-weight: 600;
}

.flashcard-back {
    background: #2d2d2d;
    border: 2px solid #11998e;
    transform: rotateY(180deg);
    flex-direction: column;
    gap: 12px;
}

.fc-meaning {
    font-size: 18px;
    color: #e0e0e0;
}

.fc-arabic {
    font-size: 20px;
    color: #ffb74d;
}

.fc-example {
    font-size: 14px;
    color: #999;
    font-style: italic;
}

.flashcard-hint {
    color: #888;
    font-size: 13px;
    margin-bottom: 16px;
}

.flashcard-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin-bottom: 20px;
}

.fc-btn {
    padding: 10px 20px;
    border: 1px solid #11998e;
    background: #2d2d2d;
    color: #11998e;
    border-radius: 8px;
    cursor: pointer;
}

.fc-btn:hover {
    background: #11998e;
    color: #fff;
}

#flashcardProgress {
    font-weight: 600;
    color: #11998e;
}

.flashcard-rating {
    text-align: center;
}

.flashcard-rating p {
    margin: 0 0 12px 0;
    color: #999;
    font-size: 14px;
}

.rating-btn {
    padding: 8px 12px;
    margin: 4px;
    border: 1px solid #444;
    background: #2d2d2d;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    color: #ccc;
}

.rating-btn:hover {
    background: #444;
}

/* ========== Write Mode ========== */
.write-container {
    width: 100%;
    max-width: 500px;
    text-align: center;
}

.write-prompt {
    margin-bottom: 20px;
}

#writePrompt {
    color: #999;
    margin-bottom: 8px;
}

#writeDefinition {
    font-size: 24px;
    font-weight: 600;
    color: #11998e;
}

#writeAnswer {
    width: 100%;
    padding: 14px;
    border: 2px solid #444;
    border-radius: 8px;
    font-size: 18px;
    text-align: center;
    margin-bottom: 16px;
    background: #2d2d2d;
    color: #e0e0e0;
}

#writeAnswer:focus {
    border-color: #11998e;
    outline: none;
}

.write-feedback {
    padding: 16px;
    border-radius: 8px;
    font-size: 16px;
    margin-top: 16px;
}

.write-feedback.correct {
    background: #1b5e20;
    color: #81c784;
}

.write-feedback.incorrect {
    background: #4a1a1a;
    color: #ef5350;
}

/* ========== Quiz in Vocab ========== */
.quiz-container2 {
    width: 100%;
}

.vocab-quiz-question {
    background: #2d2d2d;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 16px;
}

.quiz-prompt {
    font-size: 16px;
    margin-bottom: 16px;
    color: #e0e0e0;
}

.quiz-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.quiz-option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    background: #333;
    border: 2px solid #444;
    border-radius: 8px;
    cursor: pointer;
    color: #e0e0e0;
}

.quiz-option:hover {
    border-color: #11998e;
}

.quiz-option input {
    margin: 0;
}

.quiz-option.correct {
    background: #1b5e20;
    border-color: #388e3c;
}

.quiz-option.incorrect {
    background: #4a1a1a;
    border-color: #d32f2f;
}

.quiz-feedback {
    margin-top: 12px;
    padding: 12px;
    border-radius: 6px;
    font-size: 14px;
}

.quiz-feedback.correct {
    background: #1b5e20;
    color: #81c784;
}

.quiz-feedback.incorrect {
    background: #4a1a1a;
    color: #ef5350;
}

/* ========== Practice Results ========== */
.practice-results {
    text-align: center;
    padding: 40px;
}

.practice-results h3 {
    margin-bottom: 24px;
    color: #e0e0e0;
}

.result-circle {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: linear-gradient(135deg, #11998e, #38ef7d);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    font-size: 28px;
    font-weight: 700;
    color: #fff;
}

.result-message {
    color: #999;
    margin-top: 12px;
}

/* ========== Vocabulary Notification ========== */
.vocab-notification {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: #333;
    color: #fff;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 14px;
    z-index: 10001;
    transition: transform 0.3s ease;
}

.vocab-notification.show {
    transform: translateX(-50%) translateY(0);
}

/* ========== Responsive ========== */
@media (max-width: 768px) {
    .vocabulary-content {
        width: 100%;
        max-width: 100%;
        height: 100%;
        max-height: 100%;
        border-radius: 0;
    }
}


/* ========== _modal.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - MODAL & QUIZ STYLES
 * ============================================================================
 */

/* ========== Modal Base ========== */
.modal-overlay {
    position: fixed;
    top: 40px;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9998;
}

.modal-content {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    overflow: hidden;
}

/* ========== Quiz Modal ========== */
.quiz-modal {
    position: fixed;
    top: 40px;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10002;
}

.quiz-modal-content {
    background: #fff;
    border-radius: 12px;
    width: 90%;
    max-width: 600px;
    max-height: 85vh;
    overflow: hidden;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

.quiz-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    color: white;
}

.quiz-header h2 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
}

.quiz-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    transition: background 0.2s;
}

.quiz-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.quiz-container {
    padding: 24px;
    overflow-y: auto;
    max-height: calc(85vh - 80px);
}

.quiz-question {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 16px;
}

.question-text {
    margin: 0 0 12px 0;
    font-size: 14px;
    line-height: 1.5;
    color: #333;
}

.question-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.option-label {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
}

.option-label:hover {
    background: #f0f0f0;
    border-color: #bbb;
}

.option-label.correct {
    background: #d4edda;
    border-color: #28a745;
}

.option-label.incorrect {
    background: #f8d7da;
    border-color: #dc3545;
}

.option-label input {
    margin: 0;
}

.quiz-actions {
    display: flex;
    gap: 12px;
    margin-top: 20px;
}

.quiz-btn {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.quiz-btn:first-child {
    background: #4285f4;
    color: #fff;
}

.quiz-btn:first-child:hover {
    background: #3367d6;
}

.quiz-btn.secondary {
    background: #e0e0e0;
    color: #333;
}

.quiz-btn.secondary:hover {
    background: #d0d0d0;
}

.quiz-results {
    margin-top: 20px;
    padding: 20px;
    background: #f0f7ff;
    border-radius: 8px;
    text-align: center;
}

.quiz-results h3 {
    margin: 0 0 10px 0;
    color: #333;
}

.quiz-results p {
    margin: 0 0 15px 0;
    font-size: 16px;
    color: #555;
}

.score-bar {
    height: 12px;
    background: #e0e0e0;
    border-radius: 6px;
    overflow: hidden;
}

.score-fill {
    height: 100%;
    background: linear-gradient(90deg, #4285f4, #34a853);
    border-radius: 6px;
    transition: width 0.5s ease;
}

.quiz-loading {
    padding: 60px;
    text-align: center;
}

.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid #e0e0e0;
    border-top-color: #4285f4;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 20px;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.quiz-loading p {
    color: #666;
    font-size: 14px;
}


/* ========== _examination.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - EXAMINATION CENTER STYLES
 * ============================================================================
 */

/* ========== Examination Side Panel ========== */
.examination-side-panel {
    position: fixed;
    top: 40px;
    right: -520px;
    width: 500px;
    height: calc(100vh - 40px);
    background: var(--theme-bg-primary);
    border-left: 1px solid var(--theme-border-color);
    z-index: 9998;
    display: flex;
    flex-direction: column;
    transition: right 0.3s ease;
    box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
}

.examination-side-panel.visible {
    right: 0;
}

.exam-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid var(--theme-border-color);
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    flex-shrink: 0;
}

.exam-header h2 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: #fff;
}

/* ========== Exam Setup ========== */
.exam-setup {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
}

.exam-description {
    color: var(--theme-text-secondary);
    margin-bottom: 20px;
    text-align: center;
    font-size: 14px;
}

.exam-types-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin-bottom: 20px;
}

.exam-type-card {
    background: var(--theme-bg-secondary);
    border: 2px solid var(--theme-border-color);
    border-radius: 10px;
    padding: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
}

.exam-type-card:hover {
    border-color: var(--theme-accent);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
}

.exam-type-card.active {
    border-color: var(--theme-accent);
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15));
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

.exam-icon {
    font-size: 24px;
    margin-bottom: 8px;
}

.exam-type-card h3 {
    margin: 0 0 6px 0;
    font-size: 14px;
    color: var(--theme-text-primary);
}

.exam-type-card p {
    margin: 0;
    font-size: 11px;
    color: var(--theme-text-secondary);
    line-height: 1.3;
}

/* ========== Exam Config ========== */
.exam-config {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 20px;
    padding: 16px;
    background: var(--theme-bg-secondary);
    border-radius: 10px;
}

.exam-config label {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 13px;
    color: var(--theme-text-primary);
}

.exam-config select {
    padding: 8px 12px;
    border: 1px solid var(--theme-border-color);
    border-radius: 6px;
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-primary);
    font-size: 13px;
}

.exam-config .page-range {
    display: flex;
    align-items: center;
    gap: 8px;
}

.exam-config .page-range input {
    width: 60px;
    padding: 6px 10px;
    border: 1px solid var(--theme-border-color);
    border-radius: 6px;
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-primary);
}

.exam-config .page-range span {
    color: var(--theme-text-secondary);
}

/* ========== Content Selection ========== */
.content-selection {
    margin-bottom: 20px;
    background: var(--theme-bg-secondary);
    border-radius: 10px;
    padding: 16px;
}

.content-selection-header {
    margin-bottom: 12px;
}

.content-selection-header h4 {
    margin: 0 0 10px 0;
    font-size: 14px;
    color: var(--theme-text-primary);
}

.selection-actions {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.select-btn,
.scan-btn {
    padding: 6px 12px;
    border: 1px solid var(--theme-border-color);
    border-radius: 6px;
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-primary);
    cursor: pointer;
    font-size: 12px;
}

.select-btn:hover,
.scan-btn:hover {
    background: var(--theme-bg-hover);
}

.chapters-list {
    max-height: 150px;
    overflow-y: auto;
    border: 1px solid var(--theme-border-color);
    border-radius: 6px;
    padding: 8px;
    background: var(--theme-bg-tertiary);
}

.scanning-placeholder {
    text-align: center;
    padding: 16px;
    color: var(--theme-text-muted);
    font-size: 12px;
}

.scanning-placeholder .hint {
    color: var(--theme-text-muted);
    font-size: 11px;
    margin-top: 8px;
}

/* ========== Chapter Items ========== */
.chapter-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 12px;
    border: 1px solid var(--theme-border-color);
    border-radius: 6px;
    margin-bottom: 6px;
    transition: all 0.2s ease;
    background: var(--theme-bg-tertiary);
}

.chapter-item:hover {
    border-color: var(--theme-accent);
}

.chapter-item.selected {
    border-color: var(--theme-accent);
    background: rgba(102, 126, 234, 0.1);
}

.chapter-item input[type="checkbox"] {
    width: 16px;
    height: 16px;
    margin-top: 2px;
    accent-color: var(--theme-accent);
    cursor: pointer;
}

.chapter-info {
    flex: 1;
    min-width: 0;
}

.chapter-title {
    font-weight: 600;
    font-size: 13px;
    color: var(--theme-text-primary);
    margin-bottom: 3px;
}

.chapter-meta {
    font-size: 11px;
    color: var(--theme-text-muted);
}

.chapter-preview {
    font-size: 11px;
    color: var(--theme-text-secondary);
    margin-top: 4px;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.scanning-animation {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 30px 20px;
}

.scanning-animation .spinner {
    width: 36px;
    height: 36px;
    border: 3px solid var(--theme-border-color);
    border-top-color: var(--theme-accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

.scanning-animation p {
    margin-top: 14px;
    color: var(--theme-text-secondary);
    font-size: 13px;
}

.selected-summary {
    margin-top: 10px;
    font-size: 12px;
    color: var(--theme-text-secondary);
}

.start-exam-btn {
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.start-exam-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.start-exam-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* ========== Exam Container ========== */
.exam-container {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
}

.exam-progress {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
    padding: 12px;
    background: var(--theme-bg-secondary);
    border-radius: 8px;
}

.progress-bar {
    flex: 1;
    height: 6px;
    background: var(--theme-border-color);
    border-radius: 3px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #667eea, #764ba2);
    transition: width 0.3s ease;
}

#examProgressText {
    font-size: 12px;
    color: var(--theme-text-secondary);
    white-space: nowrap;
}

.exam-timer {
    font-size: 12px;
    color: var(--theme-accent);
    white-space: nowrap;
}

/* ========== Exam Question Styles ========== */
.exam-question {
    background: var(--theme-bg-secondary);
    border: 1px solid var(--theme-border-color);
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 16px;
}

.exam-question .question-number {
    font-size: 11px;
    color: var(--theme-accent);
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 10px;
}

.exam-question .question-text {
    font-size: 15px;
    line-height: 1.6;
    color: var(--theme-text-primary);
    margin-bottom: 16px;
}

.exam-question .question-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.exam-question .option-label {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    background: var(--theme-bg-tertiary);
    border: 2px solid var(--theme-border-color);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--theme-text-primary);
}

.exam-question .option-label:hover {
    border-color: var(--theme-accent);
    background: rgba(102, 126, 234, 0.1);
}

.exam-question .option-label input {
    display: none;
}

.exam-question .option-label input:checked+.option-letter {
    background: var(--theme-accent);
    color: #fff;
}

.exam-question .option-label input:checked~.option-text {
    color: var(--theme-accent);
    font-weight: 500;
}

.exam-question .option-letter {
    width: 26px;
    height: 26px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--theme-border-color);
    border-radius: 50%;
    font-size: 12px;
    font-weight: 600;
    color: var(--theme-text-secondary);
    flex-shrink: 0;
}

.exam-question .option-text {
    flex: 1;
    font-size: 14px;
    color: var(--theme-text-primary);
}

/* True/False options */
.exam-question .tf-options {
    flex-direction: row;
    gap: 12px;
}

.exam-question .tf-option {
    flex: 1;
    justify-content: center;
    padding: 16px;
}

.exam-question .tf-icon {
    font-size: 20px;
    margin-right: 8px;
}

/* Fill in blank */
.exam-question .fill-blank-input input {
    width: 100%;
    padding: 12px 14px;
    border: 2px solid var(--theme-border-color);
    border-radius: 8px;
    font-size: 15px;
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-primary);
    transition: border-color 0.2s;
}

.exam-question .fill-blank-input input:focus {
    border-color: var(--theme-accent);
    outline: none;
}

/* Matching */
.exam-question .matching-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.exam-question .matching-term {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    background: var(--theme-bg-tertiary);
    border-radius: 8px;
}

.exam-question .term-number {
    font-weight: 600;
    color: var(--theme-accent);
}

.exam-question .term-text {
    flex: 1;
    font-size: 13px;
    color: var(--theme-text-primary);
}

.exam-question .matching-select {
    padding: 6px 10px;
    border: 1px solid var(--theme-border-color);
    border-radius: 4px;
    background: var(--theme-bg-secondary);
    color: var(--theme-text-primary);
}

.exam-question .matching-definitions {
    margin-top: 12px;
    padding: 12px;
    background: var(--theme-bg-tertiary);
    border-radius: 8px;
}

.exam-question .matching-definition {
    padding: 8px 10px;
    margin-bottom: 6px;
    font-size: 13px;
    color: var(--theme-text-secondary);
}

.exam-question .def-letter {
    font-weight: 600;
    color: #764ba2;
    margin-right: 8px;
}

/* Short answer */
.exam-question .short-answer-input textarea {
    width: 100%;
    padding: 12px 14px;
    border: 2px solid var(--theme-border-color);
    border-radius: 8px;
    font-size: 14px;
    resize: vertical;
    font-family: inherit;
    line-height: 1.5;
    min-height: 100px;
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-primary);
}

.exam-question .short-answer-input textarea:focus {
    border-color: var(--theme-accent);
    outline: none;
}

/* ========== Exam Navigation ========== */
.exam-navigation {
    display: flex;
    gap: 10px;
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid var(--theme-border-color);
}

.exam-nav-btn {
    flex: 1;
    padding: 10px;
    border: 1px solid var(--theme-border-color);
    border-radius: 6px;
    background: var(--theme-bg-secondary);
    color: var(--theme-text-primary);
    cursor: pointer;
    font-size: 13px;
}

.exam-nav-btn:hover:not(:disabled) {
    background: var(--theme-bg-hover);
}

.exam-nav-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.exam-submit-btn {
    flex: 1;
    padding: 10px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    font-weight: 600;
}

/* ========== Exam Results ========== */
.exam-results {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
}

.results-summary {
    text-align: center;
    padding: 20px;
    background: var(--theme-bg-secondary);
    border-radius: 12px;
    margin-bottom: 20px;
}

.score-circle {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 16px;
}

#scorePercent {
    font-size: 24px;
    font-weight: 700;
    color: #fff;
}

.results-summary h3 {
    margin: 0 0 8px 0;
    color: var(--theme-text-primary);
    font-size: 18px;
}

.results-summary p {
    margin: 0;
    color: var(--theme-text-secondary);
    font-size: 14px;
}

.results-stats {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-top: 16px;
}

.results-stats .stat {
    text-align: center;
}

.stat-value {
    display: block;
    font-size: 20px;
    font-weight: 600;
    color: var(--theme-accent);
}

.stat-label {
    font-size: 11px;
    color: var(--theme-text-muted);
}

.results-review {
    background: var(--theme-bg-secondary);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 20px;
}

.results-review h4 {
    margin: 0 0 12px 0;
    color: var(--theme-text-primary);
    font-size: 14px;
}

#mistakesReview {
    max-height: 200px;
    overflow-y: auto;
}

/* ========== Mistake Items ========== */
.mistake-item {
    background: var(--theme-bg-tertiary);
    border: 1px solid var(--theme-border-color);
    border-radius: 8px;
    padding: 14px;
    margin-bottom: 10px;
}

.mistake-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
}

.mistake-number {
    font-weight: 600;
    color: var(--theme-accent);
    font-size: 12px;
}

.mistake-type {
    font-size: 11px;
    color: var(--theme-text-muted);
    background: var(--theme-bg-secondary);
    padding: 2px 8px;
    border-radius: 4px;
}

.mistake-question {
    font-size: 13px;
    color: var(--theme-text-primary);
    margin-bottom: 10px;
    line-height: 1.5;
}

.mistake-answers {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}

.your-answer,
.correct-answer {
    flex: 1;
    padding: 8px 10px;
    border-radius: 6px;
    font-size: 12px;
}

.your-answer {
    background: rgba(239, 83, 80, 0.15);
    border: 1px solid rgba(239, 83, 80, 0.3);
}

.correct-answer {
    background: rgba(76, 175, 80, 0.15);
    border: 1px solid rgba(76, 175, 80, 0.3);
}

.answer-label {
    display: block;
    font-size: 10px;
    color: var(--theme-text-muted);
    margin-bottom: 4px;
    text-transform: uppercase;
}

.answer-value {
    font-size: 13px;
    font-weight: 500;
}

.answer-value.wrong {
    color: var(--theme-error);
}

.answer-value.correct {
    color: var(--theme-success);
}

.mistake-explanation {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 10px;
    background: rgba(255, 152, 0, 0.1);
    border: 1px solid rgba(255, 152, 0, 0.2);
    border-radius: 6px;
    font-size: 12px;
    color: #ff9800;
}

.perfect-score {
    text-align: center;
    padding: 30px;
    font-size: 16px;
    color: var(--theme-success);
}

.results-actions {
    display: flex;
    gap: 10px;
}

.exam-btn {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 13px;
    font-weight: 600;
}

.exam-btn:first-child {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #fff;
}

.exam-btn.secondary {
    background: var(--theme-bg-secondary);
    color: var(--theme-text-primary);
    border: 1px solid var(--theme-border-color);
}

/* ========== Exam Loading ========== */
.exam-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px;
    flex: 1;
}

.exam-loading .spinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--theme-border-color);
    border-top-color: var(--theme-accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

#examLoadingText {
    margin-top: 16px;
    color: var(--theme-text-secondary);
    font-size: 14px;
}

/* ========== Responsive ========== */
@media (max-width: 768px) {
    .exam-types-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .examination-content {
        width: 100%;
        max-width: 100%;
        height: 100%;
        max-height: 100%;
        border-radius: 0;
    }

    .matching-container {
        grid-template-columns: 1fr;
    }

    .mistake-answers {
        flex-direction: column;
    }
}


/* ========== _citations.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - CITATION MANAGER STYLES
 * ============================================================================
 */

/* ========== Citation Side Panel ========== */
.citation-side-panel {
    position: fixed;
    top: 40px;
    right: -450px;
    width: 420px;
    height: calc(100vh - 40px);
    background: var(--theme-bg-primary);
    border-left: 1px solid var(--theme-border-color);
    z-index: 9998;
    display: flex;
    flex-direction: column;
    transition: right 0.3s ease;
    box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
}

.citation-side-panel.visible {
    right: 0;
}

.citation-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    flex-shrink: 0;
}

.citation-header h2 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
}

.citation-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    transition: background 0.2s;
}

.citation-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.citation-body {
    flex: 1;
    overflow-y: auto;
    padding: 0;
}

/* ========== Citation Metadata ========== */
.citation-metadata {
    padding: 16px 20px;
    background: var(--theme-bg-secondary);
    border-bottom: 1px solid var(--theme-border-color);
}

.citation-side-panel .meta-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.citation-side-panel .meta-item:last-child {
    margin-bottom: 0;
}

.citation-side-panel .meta-label {
    font-weight: 600;
    font-size: 13px;
    color: var(--theme-text-secondary);
    width: 70px;
    flex-shrink: 0;
}

.citation-side-panel .meta-item input {
    flex: 1;
    padding: 8px 12px;
    border: 1px solid var(--theme-border-color);
    border-radius: 6px;
    font-size: 13px;
    background: var(--theme-bg-tertiary);
    color: var(--theme-text-primary);
}

.citation-side-panel .meta-item input:focus {
    outline: none;
    border-color: var(--theme-accent);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

/* ========== In-Text Citation ========== */
.citation-side-panel .in-text-citation {
    background: rgba(102, 126, 234, 0.1);
    padding: 10px 12px;
    border-radius: 8px;
    margin-top: 8px;
}

.citation-side-panel .in-text-value {
    flex: 1;
    font-family: 'Georgia', serif;
    font-size: 14px;
    font-weight: 600;
    color: var(--theme-text-primary);
    background: var(--theme-bg-tertiary);
    padding: 8px 14px;
    border-radius: 6px;
    border: 2px solid var(--theme-accent);
    display: inline-block;
}

.citation-side-panel .regenerate-btn {
    display: block;
    margin: 12px 20px;
    padding: 8px 16px;
    background: var(--theme-accent);
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 13px;
    cursor: pointer;
    transition: background 0.2s;
}

.citation-side-panel .regenerate-btn:hover {
    background: #5a6fd6;
}

/* ========== Citation Formats ========== */
.citation-side-panel .citation-formats {
    padding: 16px 20px;
}

.citation-side-panel .format-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
    flex-wrap: wrap;
}

.citation-side-panel .format-tab {
    padding: 8px 14px;
    border: 1px solid var(--theme-border-color);
    background: var(--theme-bg-secondary);
    color: var(--theme-text-primary);
    border-radius: 20px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
}

.citation-side-panel .format-tab:hover {
    background: var(--theme-bg-tertiary);
}

.citation-side-panel .format-tab.active {
    background: var(--theme-accent);
    color: white;
    border-color: var(--theme-accent);
}

.citation-side-panel .citation-output {
    background: var(--theme-bg-secondary);
    border: 1px solid var(--theme-border-color);
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 12px;
}

.citation-side-panel .citation-text {
    font-size: 13px;
    line-height: 1.6;
    color: var(--theme-text-primary);
    word-break: break-word;
}

.citation-side-panel .citation-text.hidden {
    display: none;
}

.citation-side-panel .citation-text pre {
    margin: 0;
    white-space: pre-wrap;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 12px;
    color: var(--theme-text-primary);
}

.citation-side-panel .copy-citation-btn {
    width: 100%;
    padding: 12px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}

.citation-side-panel .copy-citation-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

/* ========== In-Text Citation Links ========== */
.citation-link {
    color: #1a73e8 !important;
    background-color: rgba(26, 115, 232, 0.08);
    padding: 0 2px;
    border-radius: 2px;
    cursor: pointer;
    text-decoration: none;
    transition: background-color 0.2s ease;
}

.citation-link:hover {
    background-color: rgba(26, 115, 232, 0.2);
    text-decoration: underline;
}

/* Reference section links */
.reference-url,
.reference-doi {
    color: #1a73e8 !important;
    text-decoration: underline;
    cursor: pointer;
    pointer-events: auto !important;
}

.reference-url:hover,
.reference-doi:hover {
    color: #174ea6 !important;
    text-decoration: underline;
}

/* ========== Reference Popup ========== */
.reference-popup {
    background: white;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
    padding: 20px;
    max-width: 500px;
    width: 90%;
    z-index: 100000;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.ref-popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid #e0e0e0;
}

.ref-number {
    font-weight: 600;
    color: #1a73e8;
    font-size: 16px;
}

.ref-popup-close {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #666;
    padding: 0;
    line-height: 1;
}

.ref-popup-close:hover {
    color: #333;
}

.ref-popup-text {
    font-size: 14px;
    line-height: 1.6;
    color: #333;
    margin-bottom: 16px;
    max-height: 150px;
    overflow-y: auto;
}

.ref-popup-links {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 16px;
}

.ref-link {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    background: #f1f3f4;
    border-radius: 16px;
    color: #1a73e8;
    text-decoration: none;
    font-size: 13px;
    transition: background-color 0.2s;
}

.ref-link:hover {
    background: #e8eaed;
}

.ref-goto-btn {
    width: 100%;
    padding: 10px 16px;
    background: #1a73e8;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.ref-goto-btn:hover {
    background: #1557b0;
}

/* Citation Toast */
.citation-toast {
    position: fixed;
    bottom: 24px;
    right: 24px;
    left: auto;
    transform: translateX(100%);
    opacity: 0;
    background: #1e1e3f;
    color: #ffffff;
    padding: 16px 24px;
    border-radius: 10px;
    border: 1px solid #2a2a4a;
    border-left: 4px solid #06b6d4;
    font-size: 14px;
    font-weight: 600;
    z-index: 100020;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    max-width: 420px;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    transition: opacity 0.25s ease, transform 0.25s ease;
}

.citation-toast.show {
    transform: translateX(0);
    opacity: 1;
}

/* ========== Dark Theme ========== */
body.theme-dark .reference-popup {
    background: #2d2d2d;
}

body.theme-dark .ref-popup-header {
    border-bottom-color: #444;
}

body.theme-dark .ref-popup-text {
    color: #e0e0e0;
}

body.theme-dark .ref-popup-close {
    color: #aaa;
}

body.theme-dark .ref-link {
    background: #3c3c3c;
    color: #8ab4f8;
}

body.theme-dark .citation-link {
    color: #8ab4f8 !important;
    background-color: rgba(138, 180, 248, 0.1);
}

body.theme-dark .reference-url,
body.theme-dark .reference-doi {
    color: #8ab4f8 !important;
}

body.theme-dark .citation-metadata {
    background: #363636;
    border-color: #444;
}

body.theme-dark .in-text-citation {
    background: linear-gradient(135deg, #2a2a3d 0%, #363650 100%);
}

body.theme-dark .in-text-value {
    background: #3c3c3c;
    color: #e0e0e0;
    border-color: #667eea;
}

body.theme-dark .citation-output {
    background: #363636;
    border-color: #444;
}

body.theme-dark .citation-text {
    color: #e0e0e0;
}

body.theme-dark .meta-item input {
    background: #3c3c3c;
    border-color: #555;
    color: #e0e0e0;
}

/* ========== Responsive ========== */
@media (max-width: 768px) {
    .citation-modal-content {
        width: 95%;
        max-height: 90vh;
    }
}


/* ========== _notifications.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - NOTIFICATION & SETTINGS STYLES
 * ============================================================================
 */

/* ========== Notification System ========== */
.viewer-notification {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 12px 20px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
    font-weight: 500;
    z-index: 100003;
    opacity: 0;
    transform: translateX(100%);
    transition: opacity 0.3s ease, transform 0.3s ease;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.viewer-notification.visible {
    opacity: 1;
    transform: translateX(0);
}

.viewer-notification .notification-icon {
    font-size: 18px;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.viewer-notification .notification-message {
    flex: 1;
}

.viewer-notification.notification-success {
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    color: white;
}

.viewer-notification.notification-error {
    background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
    color: white;
}

.viewer-notification.notification-warning {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
}

.viewer-notification.notification-info {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

/* ========== Settings Side Panel ========== */
.settings-side-panel {
    position: fixed;
    top: 40px;
    right: -400px;
    width: 360px;
    height: calc(100vh - 40px);
    background: var(--theme-bg-primary);
    border-left: 1px solid var(--theme-border-color);
    z-index: 9998;
    display: flex;
    flex-direction: column;
    transition: right 0.3s ease;
    box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
}

.settings-side-panel.visible {
    right: 0;
}

.settings-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    flex-shrink: 0;
}

.settings-header h2 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
}

.settings-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    transition: background 0.2s;
}

.settings-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.settings-body {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
}

.settings-section {
    margin-bottom: 24px;
}

.settings-section h3 {
    margin: 0 0 16px 0;
    font-size: 15px;
    font-weight: 600;
    color: var(--theme-text-primary);
    padding-bottom: 8px;
    border-bottom: 1px solid var(--theme-border-color);
}

.settings-option {
    margin-bottom: 12px;
}

.settings-option label {
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    font-size: 14px;
    color: var(--theme-text-primary);
}

.settings-option input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: var(--theme-accent);
    cursor: pointer;
}

.settings-subsection {
    margin-left: 30px;
    padding-left: 12px;
    border-left: 2px solid var(--theme-border-color);
    margin-top: 12px;
}

.settings-subsection .settings-option {
    margin-bottom: 10px;
}

.settings-subsection .settings-option label {
    font-size: 13px;
    color: var(--theme-text-secondary);
}

.settings-subsection.disabled {
    opacity: 0.5;
    pointer-events: none;
}

/* ========== Panel Close Button (shared) ========== */
.panel-close-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    color: white;
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
}

.panel-close-btn:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* ========== Animations ========== */
@keyframes fadeInUp {
    from {
        transform: translateY(20px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideInRight {
    from {
        transform: translateX(20px);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}


/* ========== _auto-scroll.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - AUTO-SCROLL STYLES
 * ============================================================================
 */

/* ========== Auto-Scroll Dropdown ========== */
#autoScrollDropdown {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--toolbar-bg-color);
    border: 1px solid var(--toolbar-border-color);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    margin-top: 8px;
    z-index: 10001;
}

#autoScrollDropdown.hidden {
    display: none !important;
}

#autoScrollToggle.active {
    background: var(--theme-accent);
    color: white;
}

#autoScrollToggle.active svg {
    stroke: white;
    animation: scrollBounce 1s ease-in-out infinite;
}

@keyframes scrollBounce {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(3px);
    }
}

/* ========== Speed Slider ========== */
#scrollSpeedSlider {
    -webkit-appearance: none;
    appearance: none;
    height: 6px;
    background: var(--input-bg-color);
    border-radius: 3px;
    outline: none;
}

#scrollSpeedSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--theme-accent);
    cursor: pointer;
    transition: transform 0.2s;
}

#scrollSpeedSlider::-webkit-slider-thumb:hover {
    transform: scale(1.2);
}

/* ========== Speed Preset Buttons ========== */
.speed-preset-btn {
    flex: 1;
    padding: 6px;
    border: 1px solid var(--toolbar-border-color);
    border-radius: 4px;
    background: var(--input-bg-color);
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s;
}

.speed-preset-btn:hover {
    background: var(--toolbar-hover-bg-color);
    transform: scale(1.1);
}

.speed-preset-btn.active {
    background: var(--theme-accent);
    border-color: var(--theme-accent);
}


/* ========== _immersive-reader.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - IMMERSIVE READER / LINE FOCUS STYLES
 * ============================================================================
 */

/* ========== Line Focus Overlay ========== */
#lineFocusOverlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9000;
}

#lineFocusOverlay.hidden {
    display: none;
}

.focus-shade {
    position: fixed;
    background: rgba(0, 0, 0, 0.7);
    pointer-events: none;
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
}

.focus-shade-top {
    top: 0;
    left: 0;
}

.focus-shade-bottom {
    left: 0;
}

.focus-line {
    position: fixed;
    background: transparent;
    border-top: 2px solid rgba(66, 133, 244, 0.6);
    border-bottom: 2px solid rgba(66, 133, 244, 0.6);
    box-shadow: 0 0 20px rgba(66, 133, 244, 0.3), inset 0 0 40px rgba(255, 255, 255, 0.05);
    pointer-events: none;
}

/* ========== Line Focus Control Panel ========== */
#lineFocusControl {
    position: fixed;
    top: 50px;
    right: 20px;
    background: rgba(35, 35, 35, 0.95);
    border: 1px solid #444;
    border-radius: 10px;
    padding: 16px 50px 16px 20px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    z-index: 10005;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    min-width: 220px;
}

#lineFocusControl.hidden {
    display: none;
}

#lineFocusControl .control-group {
    display: flex;
    align-items: center;
    gap: 10px;
}

#lineFocusControl .control-label {
    color: #aaa;
    font-size: 12px;
    font-weight: 500;
    min-width: 45px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

#lineFocusControl .control-slider {
    flex: 1;
    -webkit-appearance: none;
    appearance: none;
    height: 4px;
    background: #444;
    border-radius: 2px;
    outline: none;
    cursor: pointer;
}

#lineFocusControl .control-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 14px;
    height: 14px;
    background: #4285f4;
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.1s;
}

#lineFocusControl .control-slider::-webkit-slider-thumb:hover {
    transform: scale(1.2);
}

#lineFocusControl .control-slider::-moz-range-thumb {
    width: 14px;
    height: 14px;
    background: #4285f4;
    border-radius: 50%;
    cursor: pointer;
    border: none;
}

#lineFocusControl .control-value {
    color: #e0e0e0;
    font-size: 12px;
    min-width: 28px;
    text-align: right;
    font-family: monospace;
}

#lineFocusControl .control-close {
    position: absolute;
    top: 10px;
    right: 12px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: #aaa;
    font-size: 20px;
    cursor: pointer;
    padding: 4px 8px;
    line-height: 1;
    transition: all 0.2s;
    border-radius: 6px;
    z-index: 1;
}

#lineFocusControl .control-close:hover {
    color: #fff;
    background: rgba(255, 100, 100, 0.3);
}


/* ========== index.css ========== */
/**
 * ============================================================================
 * PDF VIEWER - MAIN CSS ENTRY POINT
 * ============================================================================
 * 
 * This file imports all modular CSS files for the PDF viewer.
 * Modularized from the original custom_viewer.css for better maintainability.
 * 
 * Module Order (dependencies considered):
 * 1. Variables - CSS custom properties and theme definitions
 * 2. Base - Reset and foundational styles
 * 3. Core UI components
 * 4. Feature-specific panels
 */

/* ========== Core ========== */
@import '_variables.css';
@import '_base.css';
@import '_themes.css';

/* ========== UI Components ========== */
@import '_toolbar.css';
@import '_sidebar.css';
@import '_modal.css';

/* ========== Features ========== */
@import '_highlight.css';
@import '_auto-scroll.css';
@import '_immersive-reader.css';

/* ========== Side Panels ========== */
@import '_examination.css';
@import '_vocabulary.css';
@import '_citations.css';
@import '_notes.css';
@import '_research-library.css';
@import '_global-notes.css';

/* ========== Utilities ========== */
@import '_notifications.css';